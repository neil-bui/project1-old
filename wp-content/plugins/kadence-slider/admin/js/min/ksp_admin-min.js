!function(s){jQuery.fn.ksp_betterClone=function(){for(var e=s.apply(this,arguments),a=this.find("textarea").add(this.filter("textarea")),i=e.find("textarea").add(e.filter("textarea")),t=this.find("select").add(this.filter("select")),l=e.find("select").add(e.filter("select")),r=0,n=a.length;n>r;++r)jQuery(i[r]).val(jQuery(a[r]).val());for(var r=0,n=t.length;n>r;++r)for(var p=0,d=t[r].options.length;d>p;++p)t[r].options[p].selected===!0&&(l[r].options[p].selected=!0);return e}}(jQuery.fn.clone),function($){$(window).load(function(){function s(){var s=$(document.getElementById("kt_ajax_overlay"));s.fadeOut();var e=$(".ksp-admin .ksp-message.ksp-message-ok");e.css({display:"block",opacity:0}),e.animate({opacity:1},300).delay(2e3).animate({opacity:0},300,function(){e.css("display","none")})}function e(){var s=$(document.getElementById("kt_ajax_overlay"));s.fadeOut();var e=$(".ksp-admin .ksp-message.ksp-message-error");e.css({display:"block",opacity:0}),e.animate({opacity:1},300).delay(2e3).animate({opacity:0},300,function(){e.css("display","none")})}function a(){$("#ksp-slider-settings .ksp-settings-table #ksp-slider-fullHeight").length&&($("#ksp-slider-settings .ksp-settings-table #ksp-slider-fullHeight").is(":checked")?$("#ksp-slider-settings .ksp-settings-table .ksp-full-height-offset-row").show():$("#ksp-slider-settings .ksp-settings-table .ksp-full-height-offset-row").hide())}function i(){var s=$(".ksp-admin #ksp-slides .ksp-add-new"),e=$(".ksp-admin #ksp-slides .ksp-void-slide").html();s.parent().before('<li class="kt-ui-default"><a>'+ksp_translations.slide+' <span class="ksp-slide-index">'+(C+1)+'</span></a><span class="ksp-close"></span></li>'),$(".ksp-admin #ksp-slides .ksp-slide-tab").tabs("refresh"),$(".ksp-admin #ksp-slides .ksp-slides-list").append('<div class="ksp-slide">'+e+"</div>"),C++;var a=s.parent().index()-1;$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").eq(a).find("a").click(),$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").removeClass("active"),$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").eq(a).addClass("active"),t(),l()}function t(){var s=parseInt($("#ksp-slider-settings .ksp-settings-table #ksp-slider-maxWidth").val()),e=parseInt($("#ksp-slider-settings .ksp-settings-table #ksp-slider-maxHeight").val());$(".ksp-admin #ksp-slides .ksp-slide .ksp-slide-editing-area").css({width:s,height:e}),$(".ksp-admin").css({width:s+40})}function l(){$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-slide-settings-list .ksp-slide-background_type_color-picker-input").each(function(){$(this).wpColorPicker({change:function(s,e){var a=$(this);if("1"==a.closest(".ksp-content").find('input[name="ksp-slide-background_type_color"]:checked').val()){var i=a.closest(".ksp-slide").find(".ksp-layers .ksp-slide-editing-area");i.css("background-color",e.color.toString())}},clear:function(){},hide:!0,palettes:!0})})}function r(s){var e=s.find(".ksp-slide-editing-area"),a;return a?void a.open():(a=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),a.on("select",function(){attachment=a.state().get("selection").first().toJSON();var s=attachment.url,i=attachment.alt;e.css("background-image",'url("'+s+'")'),e.data("background-image-src",s)}),void a.open())}function n(){$(".ksp-admin .ksp-layers .ksp-layer-wrap").draggable({containment:"parent",start:function(){p($(this))},drag:function(){var s=$(this).position(),e=s.left,a=s.top,i=$(this).index();$(this).closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-settings:eq("+i+") .ksp-layer-data_x").val(e),$(this).closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-settings:eq("+i+") .ksp-layer-data_y").val(a)}})}function p(s){var e=s.index(),a=s.closest(".ksp-slide"),i=a.find(".ksp-layers .ksp-layers-list");i.find(".ksp-layer-settings").css("display","none"),i.find(".ksp-layer-settings").removeClass("active"),i.find(".ksp-layer-settings:eq("+e+")").css("display","block"),i.find(".ksp-layer-settings:eq("+e+")").addClass("active"),s.parent().children().removeClass("active"),s.addClass("active"),a.find(".ksp-layers-actions .ksp-delete-layer").removeClass("ksp-is-disabled"),a.find(".ksp-layers-actions .ksp-duplicate-layer").removeClass("ksp-is-disabled")}function d(){$(".ksp-admin .ksp-slide .ksp-layers .ksp-slide-editing-area .ksp-layer-wrap").removeClass("active"),$(".ksp-admin .ksp-slide .ksp-layers .ksp-layers-list .ksp-layer-settings").removeClass("active"),$(".ksp-admin .ksp-slide .ksp-layers .ksp-layers-list .ksp-layer-settings").css("display","none"),$(".ksp-admin .ksp-slide .ksp-layers-actions .ksp-delete-layer").addClass("ksp-is-disabled"),$(".ksp-admin .ksp-slide .ksp-layers-actions .ksp-duplicate-layer").addClass("ksp-is-disabled")}function o(s){var e=s.index(),a=s.closest(".ksp-slide");s.remove();var i=a.find(".ksp-layers-list .ksp-layer-settings:eq("+e+")");i.remove(),d()}function k(s){var e=s.index(),a=s.closest(".ksp-slide");s.clone().appendTo(s.parent());var i=a.find(".ksp-layers-list .ksp-layer-settings").eq(e);i.clone().insertBefore(i.parent().find(".ksp-void-text-layer-settings")),d(),p(s.parent().find(".ksp-layer-wrap").last());var t=s.parent().find(".ksp-layer-wrap").last().closest(".ksp-slide").find(".ksp-layers-list .ksp-layer-settings.active");t.find(".ksp-layer-data_in").val(i.find(".ksp-layer-data_in").val()),t.find(".ksp-layer-data_out").val(i.find(".ksp-layer-data_out").val()),t.find(".ksp-layer-custom_css").val(i.find(".ksp-layer-custom_css").val()),i.hasClass("ksp-image-layer-settings")&&(t.find(".ksp-image-layer-upload-button").data("src",i.find(".ksp-image-layer-upload-button").data("src")),t.find(".ksp-image-layer-upload-button").data("alt",i.find(".ksp-image-layer-upload-button").data("alt"))),n()}function c(){$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-layer-settings-list .ksp-color-wp-color-picker").each(function(){$(this).wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer").css("color",e.color.toString())}})})}function y(s){var e=s.find(".ksp-slide-editing-area"),a=s.find(".ksp-layers .ksp-layers-list .ksp-void-text-layer-settings"),i='<div class="ksp-layer-settings ksp-text-layer-settings">'+$(".ksp-admin .ksp-slide .ksp-layers .ksp-void-text-layer-settings").html()+"</div>";e.append('<div class="ksp-layer-wrap" style="z-index: 1;"><div class="ksp-layer ksp-text-layer">'+ksp_translations.text_layer_default_html+"</div></div>"),a.before(i),n(),p(e.find(".ksp-layer-wrap").last());var t=s.find(".ksp-text-layer-settings.active").index(),l=e.find(".ksp-layer").last(),r=parseInt($("#ksp-slider-settings .ksp-settings-table #ksp-slider-maxHeight").val()/2-parseFloat(l.closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+t+")").height())/2);e.find(".ksp-layer").last().css("top",r),l.closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+t+")").css("top",r),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-settings:eq("+t+") .ksp-layer-data_y").val(r);var d=parseInt($("#ksp-slider-settings .ksp-settings-table #ksp-slider-maxWidth").val()/2-parseFloat(l.closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+t+")").width())/2);l.closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+t+")").css("left",d),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-settings:eq("+t+") .ksp-layer-data_x").val(d),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-font_color").wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer").css("color",e.color.toString())}})}function f(s){var e=s.find(".ksp-slide-editing-area"),a=s.find(".ksp-layers .ksp-layers-list .ksp-void-text-layer-settings"),i='<div class="ksp-layer-settings ksp-button-layer-settings">'+$(".ksp-admin .ksp-slide .ksp-layers .ksp-void-button-layer-settings").html()+"</div>";e.append('<div class="ksp-layer-wrap" style="z-index: 1;"><div class="ksp-layer ksp-button-layer" data-color="#ffffff" data-border-color="#000000" data-background-color="#000000" data-hcolor="#ffffff" data-hborder-color="#444444" data-hbackground-color="#444444">'+ksp_translations.button_layer_default_html+"</div></div>"),a.before(i),n(),p(e.find(".ksp-layer-wrap").last());var t=s.find(".ksp-button-layer-settings.active").index(),l=e.find(".ksp-layer").last(),r=parseInt($("#ksp-slider-settings .ksp-settings-table #ksp-slider-maxHeight").val()/2-parseFloat(l.closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+t+")").height())/2);e.find(".ksp-layer").last().css("top",r),l.closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+t+")").css("top",r),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-settings:eq("+t+") .ksp-layer-data_y").val(r);var d=parseInt($("#ksp-slider-settings .ksp-settings-table #ksp-slider-maxWidth").val()/2-parseFloat(l.closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+t+")").width())/2);l.closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+t+")").css("left",d),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-settings:eq("+t+") .ksp-layer-data_x").val(d),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-font_color").wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.css("color",e.color.toString()),i.attr("data-color",e.color.toString()),i.mouseout(function(){$(this).css("color",e.color.toString())})}}),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-background_color").wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.css("background",e.color.toString()),i.attr("data-background-color",e.color.toString()),i.mouseout(function(){$(this).css("background",e.color.toString())})}}),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-border_color").wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.css("border-color",e.color.toString()),i.attr("data-border-color",e.color.toString()),i.mouseout(function(){$(this).css("border-color",e.color.toString())})}}),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-font_hover_color").wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.attr("data-hcolor",e.color.toString()),i.mouseover(function(){$(this).css("color",e.color.toString())})}}),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-border_hover_color").wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.attr("data-hborder-color",e.color.toString()),i.mouseover(function(){$(this).css("border-color",e.color.toString())})}}),l.closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-background_hover_color").wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.attr("data-hbackground-color",e.color.toString()),i.mouseover(function(){$(this).css("background",e.color.toString())})}}),l.mouseenter(function(){$(this).css("color",$(this).data("hcolor")),$(this).css("border-color",$(this).data("hborder-color")),$(this).css("background",$(this).data("hbackground-color"))}),l.mouseleave(function(){$(this).css("color",$(this).data("color")),$(this).css("border-color",$(this).data("border-color")),$(this).css("background",$(this).data("background-color"))})}function g(){$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-layer-settings-list .ksp-bcolor-wp-color-picker").each(function(){$(this).wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.css("color",e.color.toString()),i.mouseout(function(){$(this).css("color",e.color.toString())})}})}),$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-layer-settings-list .ksp-hcolor-wp-color-picker").each(function(){$(this).wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.attr("data-hcolor",e.color.toString()),i.mouseover(function(){$(this).css("color",e.color.toString())})}})}),$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-layer-settings-list .ksp-background-wp-color-picker").each(function(){$(this).wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.css("background",e.color.toString()),i.mouseout(function(){$(this).css("background",e.color.toString())})}})}),$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-layer-settings-list .ksp-hbackground-wp-color-picker").each(function(){$(this).wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.attr("data-hbackground-color",e.color.toString()),i.mouseover(function(){$(this).css("background",e.color.toString())})}})}),$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-layer-settings-list .ksp-border-wp-color-picker").each(function(){$(this).wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.css("border-color",e.color.toString()),i.mouseout(function(){$(this).css("border-color",e.color.toString())})}})}),$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-layer-settings-list .ksp-hborder-wp-color-picker").each(function(){$(this).wpColorPicker({change:function(s,e){var a=$(this).closest(".ksp-layer-settings").index(),i=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+a+") .ksp-layer");i.attr("data-hborder-color",e.color.toString()),i.mouseover(function(){$(this).css("border-color",e.color.toString())})}})})}function u(s){var e=s.find(".ksp-slide-editing-area"),a=s.find(".ksp-layers .ksp-layers-list .ksp-void-text-layer-settings"),i='<div class="ksp-layer-settings ksp-image-layer-settings">'+$(".ksp-admin .ksp-slide .ksp-layers .ksp-void-image-layer-settings").html()+"</div>";e.append('<div class="ksp-layer-wrap" style="z-index: 1;"><img class="ksp-layer ksp-image-layer" src="" /></div>'),a.before(i),n(),p(e.find(".ksp-layer-wrap").last()),h(s)}function h(s){var e=s.find(".ksp-slide-editing-area"),a=s.find(".ksp-layers .ksp-layers-list .ksp-void-text-layer-settings"),i='<div class="ksp-layer-settings ksp-image-layer-settings">'+$(".ksp-admin .ksp-slide .ksp-layers .ksp-void-image-layer-settings").html()+"</div>",t;return t?void t.open():(t=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),t.on("select",function(){attachment=t.state().get("selection").first().toJSON();var s=attachment.url,i=attachment.alt,l=attachment.width,r=attachment.height,n=e.find(".ksp-layer-wrap.active .ksp-image-layer").last();n.attr("src",s),n.attr("alt",i),n.css("width",l),n.css("height",r),a.parent().find(".ksp-layer-settings.active .ksp-image-layer-upload-button").data("src",s),a.parent().find(".ksp-layer-settings.active .ksp-image-layer-upload-button").data("alt",i),a.parent().find(".ksp-layer-settings.active .ksp-layer-width").val(l),a.parent().find(".ksp-layer-settings.active .ksp-layer-height").val(r)}),void t.open())}function v(){var s=$(document.getElementById("kt_ajax_overlay")),a=$(".ksp-slider #ksp-slider-settings"),i={id:parseInt($(".ksp-save-settings").data("id")),name:a.find("#ksp-title").val(),maxHeight:parseInt(a.find("#ksp-slider-maxHeight").val()),maxWidth:parseInt(a.find("#ksp-slider-maxWidth").val()),fullHeight:parseInt(a.find("#ksp-slider-fullHeight").is(":checked")?1:0),fullWidth:parseInt(a.find("#ksp-slider-fullWidth").is(":checked")?1:0),full_offset:a.find("#ksp-slider-full_offset").val(),responsive:parseInt(a.find("#ksp-slider-responsive").is(":checked")?1:0),autoPlay:parseInt(a.find("#ksp-slider-autoPlay").is(":checked")?1:0),pauseTime:parseInt(a.find("#ksp-slider-pauseTime").val()),enableParallax:parseInt(a.find("#ksp-slider-enableParallax").is(":checked")?1:0),singleSlide:parseInt(a.find("#ksp-slider-singleSlide").is(":checked")?1:0),minHeight:parseInt(a.find("#ksp-slider-minHeight").val()),pauseonHover:parseInt(a.find("#ksp-slider-pauseonHover").is(":checked")?1:0)};s.fadeIn(),jQuery.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:$(".ksp-slider").hasClass("ksp-add-slider")?"ksp_addSlider":"ksp_editSlider",datas:i},success:function(s){if(s!==!1){if($(".ksp-slider").hasClass("ksp-add-slider"))return void(window.location.href="?page=kadenceslider&view=layeredit&id="+s);m()}else e()},error:function(s,a,i){alert("Error saving slider"),alert("Status: "+a),alert("Error: "+i),e()}})}function m(){var s=$(".ksp-slider .ksp-slide"),a=0,i={};i.options=new Array,s.each(function(){var s=$(this),e=s.find(".ksp-slide-settings-list"),t={slider_parent:parseInt($(".ksp-admin .ksp-save-settings").data("id")),position:a,background_type_image:"none"==s.find(".ksp-slide-editing-area").css("background-image")?"none":s.find(".ksp-slide-editing-area").data("background-image-src")+"",background_type_color:"0"==e.find('input[name="ksp-slide-background_type_color"]:checked').val()?"transparent":s.find(".ksp-slide-editing-area").css("background-color")+"",background_propriety_position:e.find(".ksp-slide-background_propriety_position").val(),background_repeat:"0"==e.find('input[name="ksp-slide-background_repeat"]:checked').val()?"no-repeat":"repeat",background_propriety_size:e.find(".ksp-slide-background_propriety_size").val()};i.options[a]=t,a++}),i.slider_parent=parseInt($(".ksp-admin .ksp-save-settings").data("id")),jQuery.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"ksp_editSlides",datas:i},success:function(s){s!==!1?_():e()},error:function(s,a,i){alert("Error saving slides"),alert("Status: "+a),alert("Error: "+i),e()}})}function _(){var a=$(".ksp-admin .ksp-slider #ksp-slides .ksp-slide"),i=0,t=0,l={};l.options=new Array,a.each(function(){var s=$(this),e=s.find(".ksp-layers .ksp-layer-settings");e.each(function(){var s=$(this);if(!s.hasClass("ksp-void-layer-settings")){var e;e=s.hasClass("ksp-text-layer-settings")?"text":s.hasClass("ksp-image-layer-settings")?"image":s.hasClass("ksp-button-layer-settings")?"button":"undefined";var a={slider_parent:parseInt($(".ksp-admin .ksp-save-settings").data("id")),slide_parent:i,position:s.index(),type:e,inner_html:s.hasClass("ksp-text-layer-settings")||s.hasClass("ksp-button-layer-settings")?s.find(".ksp-layer-inner_html").val():"",image_src:s.hasClass("ksp-image-layer-settings")?s.find(".ksp-image-layer-upload-button").data("src"):"",image_alt:s.hasClass("ksp-image-layer-settings")?s.find(".ksp-image-layer-upload-button").data("alt"):"",width:s.hasClass("ksp-image-layer-settings")?parseInt(s.find(".ksp-layer-width").val()):"",height:s.hasClass("ksp-image-layer-settings")?parseInt(s.find(".ksp-layer-height").val()):"",font_color:s.hasClass("ksp-text-layer-settings")||s.hasClass("ksp-button-layer-settings")?s.find(".ksp-layer-font_color").val():"",background_color:s.hasClass("ksp-button-layer-settings")?s.find(".ksp-layer-background_color").val():"",border_color:s.hasClass("ksp-button-layer-settings")?s.find(".ksp-layer-border_color").val():"",font_hover_color:s.hasClass("ksp-button-layer-settings")?s.find(".ksp-layer-font_hover_color").val():"",background_hover_color:s.hasClass("ksp-button-layer-settings")?s.find(".ksp-layer-background_hover_color").val():"",border_hover_color:s.hasClass("ksp-button-layer-settings")?s.find(".ksp-layer-border_hover_color").val():"",border_width:s.hasClass("ksp-button-layer-settings")?parseInt(s.find(".ksp-layer-border_width").val()):"",border_radius:s.hasClass("ksp-button-layer-settings")?parseInt(s.find(".ksp-layer-border_radius").val()):"",padding:s.hasClass("ksp-button-layer-settings")?parseInt(s.find(".ksp-layer-padding").val()):"",font_size:s.hasClass("ksp-text-layer-settings")||s.hasClass("ksp-button-layer-settings")?parseInt(s.find(".ksp-layer-font_size").val()):"",line_height:s.hasClass("ksp-text-layer-settings")||s.hasClass("ksp-button-layer-settings")?parseInt(s.find(".ksp-layer-line_height").val()):"",letter_spacing:s.hasClass("ksp-text-layer-settings")||s.hasClass("ksp-button-layer-settings")?parseInt(s.find(".ksp-layer-letter_spacing").val()):"",font:s.hasClass("ksp-text-layer-settings")||s.hasClass("ksp-button-layer-settings")?s.find(".ksp-layer-font").val():"",data_x:parseInt(s.find(".ksp-layer-data_x").val()),data_y:parseInt(s.find(".ksp-layer-data_y").val()),data_delay:parseInt(s.find(".ksp-layer-data_delay").val()),data_in:s.find(".ksp-layer-data_in").val(),data_out:s.find(".ksp-layer-data_out").val(),data_ease:s.find(".ksp-layer-data_ease").val(),link:s.find(".ksp-layer-link").val(),link_new_tab:parseInt(s.find(".ksp-layer-link_new_tab").is(":checked")?1:0),z_index:parseInt(s.find(".ksp-layer-z_index").val())};l.options[t]=a,t++}}),i++}),l.layers=1,0==l.options.length&&(l.layers=0),l.slider_parent=parseInt($(".ksp-admin .ksp-save-settings").data("id")),l.options=JSON.stringify(l.options),jQuery.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"ksp_editLayers",datas:l},success:function(a){a!==!1?($(".ksp-admin").trigger("savedSlide"),s()):e()},error:function(s,a,i){alert("Error saving layers"),console.log(s.responseText),e()}})}function b(a){var i={id:parseInt(a.data("delete"))};jQuery.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"ksp_deleteSlider",datas:i},success:function(i){i!==!1?(a.parent().parent().remove(),s()):e()},error:function(s,a,i){alert("Error deleting slider"),alert("Status: "+a),alert("Error: "+i),e()}})}function x(a){var i=$(document.getElementById("kt_ajax_overlay")),t={id:parseInt(a.data("duplicate"))};i.fadeIn(),jQuery.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"ksp_duplicateSlider",datas:t},success:function(i){if(i.response!==!1){var t=a.parent().parent().clone().appendTo(a.parent().parent().parent());t.find(".ksp_column_02").html(i.cloned_slider_id),t.find(".ksp_column_03 a").html(i.cloned_slider_name),t.find(".ksp_column_03 a").attr("href","?page=kadenceslider&view=layeredit&id="+i.cloned_slider_id),t.find(".ksp_column_04").html('[kadence_slider_pro id="'+i.cloned_slider_id+'"]'),t.find(".ksp-edit-slider").attr("href","?page=kadenceslider&view=layeredit&id="+i.cloned_slider_id),t.find(".ksp-duplicate-slider").data("duplicate",i.cloned_slider_id),t.find(".ksp-delete-slider").data("delete",i.cloned_slider_id),t.find(".ksp-export-slider").data("export",i.cloned_slider_id),s()}else e()},error:function(s,a,i){alert("Error duplicating slider"),console.log(s.responseText),e()}})}function w(a){var i=$(document.getElementById("kt_ajax_overlay")),t={id:parseInt(a.data("export"))};i.fadeIn(),jQuery.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"ksp_exportSlider",datas:t},success:function(a){a.response!==!1?(window.location.href=a.url,s()):e()},error:function(s,a,i){alert("Error while exporting the slider"),console.log(s.responseText),e()}})}function q(){var a=$(document.getElementById("kt_ajax_overlay")),i=$("#ksp-import-file")[0].files[0];if(i){$("#ksp-import-file").val("");var t=new FormData;t.append("file",i),t.append("action","ksp_importSlider"),a.fadeIn(),jQuery.ajax({type:"POST",url:ajaxurl,contentType:!1,processData:!1,data:t,success:function(a){if(a=JSON.parse(a),a.response!==!1){var i=$(".ksp-sliders-list .ksp-duplicate-slider:eq(0)");if(i.length>0){var t=i.parent().parent().clone().appendTo(i.parent().parent().parent());t.find(".ksp_column_02").html(a.imported_slider_id),t.find(".ksp_column_03 a").html(a.imported_slider_name),t.find(".ksp_column_03 a").attr("href","?page=ksp&view=layeredit&id="+a.imported_slider_id),t.find(".ksp_column_04").html('[kadence_slider_pro id="'+a.imported_slider_id+'"]'),t.find(".ksp-edit-slider").attr("href","?page=ksp&view=layeredit&id="+a.imported_slider_id),t.find(".ksp-duplicate-slider").data("duplicate",a.imported_slider_id),t.find(".ksp-delete-slider").data("delete",a.imported_slider_id),t.find(".ksp-delete-slider").data("export",a.imported_slider_id)}else location.reload();s()}else e()},error:function(s,a,i){alert("Error while importing the slider"),console.log(s.responseText),e()}})}}n(),$("#ksp-slider-settings .ksp-settings-table #ksp-slider-maxWidth").keyup(function(){t()}),$("#ksp-slider-settings .ksp-settings-table #ksp-slider-maxHeight").keyup(function(){t()}),$("#ksp-slider-settings .ksp-settings-table #ksp-slider-fullHeight").change(function(){$(this).is(":checked")?$(this).closest(".ksp-settings-table").find(".ksp-full-height-offset-row").show():$(this).closest(".ksp-settings-table").find(".ksp-full-height-offset-row").hide()}),a();var C=$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").length-1,S,I;$(".ksp-slide-tabs .ksp-sortable").sortable({items:"li:not(.ui-state-disabled)",cancel:".ui-state-disabled",start:function(s,e){S=$(e.item).index()},update:function(s,e){I=$(e.item).index();var a=$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-slide:eq("+S+")"),i=$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-slide:eq("+I+")");I>S?a.insertAfter(i):a.insertBefore(i),$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").each(function(){var s=$(this);s.find("a").hasClass("ksp-add-new")||s.find("a").text(ksp_translations.slide+(s.index()+1))})}}),$(".ksp-slide-tabs .ksp-sortable li").disableSelection(),$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li a").live("click",function(){if($(this).parent().index()!=C){$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-slide").css("display","none");var s=$(this).parent().index();$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-slide:eq("+s+")").css("display","block"),$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").removeClass("active"),$(this).parent().addClass("active")}}),$(".ksp-admin #ksp-slides .ksp-add-new").click(function(){i()}),0==C?i():$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").eq(0).find("a").click(),$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li .ksp-close").live("click",function(){if($(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").length<=2)return void alert(ksp_translations.slide_delete_just_one);var s=window.confirm(ksp_translations.slide_delete_confirm);if(s){C--;var e=$(this).parent().index();$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").eq(e).hasClass("active")&&0!=C&&($(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").eq(0).addClass("active"),$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-slide").css("display","none"),$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-slide").eq(0).css("display","block")),$(this).parent().remove(),$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-slide").eq(e).remove();for(var a=e;C>a;a++){var i=$(".ksp-admin #ksp-slides .ksp-slide-tabs ul li").eq(a),t=parseInt(i.find(".ksp-slide-index").text());i.find(".ksp-slide-index").text(t-1)}}}),$(".ksp-admin #ksp-slides .ksp-slide-tabs > ul > li .ksp-duplicate").live("click",function(){var s=$(this).parent().index(),e=$(".ksp-admin #ksp-slides .ksp-slides-list .ksp-slide").eq(s);e.ksp_betterClone(!0).appendTo(e.parent()).css("display","none"),$(this).parent().parent().find(".ksp-add-new").parent().before('<li class="kt-ui-default"><a>'+ksp_translations.slide+' <span class="ksp-slide-index">'+(C+1)+'</span></a><span class="ksp-duplicate"></span><span class="ksp-close"></span></li>'),$(".ksp-admin #ksp-slides .ksp-slide-tab").tabs("refresh"),C++,v(),$(".ksp-admin").on("savedSlide",function(){location.reload()})}),l(),$(".ksp-admin #ksp-slides").on("change",'.ksp-slides-list .ksp-slide-settings-list input[name="ksp-slide-background_type_color"]:radio',function(){var s=$(this),e=s.closest(".ksp-slide").find(".ksp-layers .ksp-slide-editing-area");if("0"==s.val())e.css("background-color","#fff");else{var a=s.closest(".ksp-content").find(".wp-color-result").css("background-color");e.css("background-color",a)}}),$(".ksp-admin #ksp-slides").on("change",'.ksp-slides-list .ksp-slide-settings-list input[name="ksp-slide-background_type_image"]:radio',function(){var s=$(this),e=s.closest(".ksp-slide").find(".ksp-slide-editing-area");if("0"==s.val())e.css("background-image","none");else{var a=$(this).closest(".ksp-slide");r(a)}}),$(".ksp-admin #ksp-slides").on("click",".ksp-slides-list .ksp-slide-settings-list .ksp-slide-background_type_image-upload-button",function(){var s=$(this);if("1"==s.closest(".ksp-content").find('input[name="ksp-slide-background_type_image"]:checked').val()){var e=$(this).closest(".ksp-slide");r(e)}}),$(".ksp-admin #ksp-slides").on("change",'.ksp-slides-list .ksp-slide-settings-list input[name="ksp-slide-background_repeat"]:radio',function(){var s=$(this),e=s.closest(".ksp-slide").find(".ksp-layers .ksp-slide-editing-area");"0"==s.val()?e.css("background-repeat","no-repeat"):e.css("background-repeat","repeat")}),$(".ksp-admin #ksp-slides").on("change",".ksp-slides-list .ksp-slide-settings-list .ksp-slide-background_propriety_position",function(){var s=$(this).val(),e=$(this).closest(".ksp-slide").find(".ksp-layers .ksp-slide-editing-area");e.css("background-position",s)}),$(".ksp-admin #ksp-slides").on("change",".ksp-slides-list .ksp-slide-settings-list .ksp-slide-background_propriety_size",function(){var s=$(this).val(),e=$(this).closest(".ksp-slide").find(".ksp-layers .ksp-slide-editing-area");e.css("background-size",s)}),$(".ksp-admin #ksp-slides").on("click",".ksp-slide .ksp-layers .ksp-slide-editing-area .ksp-layer-wrap",function(s){s.stopPropagation(),s.preventDefault(),p($(this))}),$(".ksp-admin").on("click",".ksp-slide .ksp-layers .ksp-slide-editing-area",function(){d()}),$(".ksp-admin #ksp-slides").on("click",".ksp-slide .ksp-layers .ksp-layers-actions .ksp-delete-layer",function(){if(!$(this).hasClass(".ksp-is-disabled")){var s=$(this).closest(".ksp-slide"),e=s.find(".ksp-layers .ksp-slide-editing-area .ksp-layer-wrap.active");o(e)}}),c(),$(".ksp-admin #ksp-slides").on("click",".ksp-slide .ksp-layers .ksp-layers-actions .ksp-duplicate-layer",function(){if(!$(this).hasClass(".ksp-is-disabled")){var s=$(this).closest(".ksp-slide"),e=s.find(".ksp-layers .ksp-slide-editing-area .ksp-layer-wrap.active");k(e)}}),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-data_x",function(){var s=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+")").css("left",parseFloat($(this).val()))}),$(".ksp-admin").on("click",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-center-x",function(){var s=$(this).closest(".ksp-layer-settings").index(),e=parseInt($("#ksp-slider-settings .ksp-settings-table #ksp-slider-maxWidth").val()/2-parseFloat($(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+")").width())/2);$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+")").css("left",e),$(this).closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-settings:eq("+s+") .ksp-layer-data_x").val(e);
}),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-data_y",function(){var s=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+")").css("top",parseFloat($(this).val()))}),$(".ksp-admin").on("click",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-center-y",function(){var s=$(this).closest(".ksp-layer-settings").index(),e=parseInt($("#ksp-slider-settings .ksp-settings-table #ksp-slider-maxHeight").val()/2-parseFloat($(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+")").height())/2);$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+")").css("top",e),$(this).closest(".ksp-layers").find(".ksp-layers-list .ksp-layer-settings:eq("+s+") .ksp-layer-data_y").val(e)}),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-z_index",function(){var s=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+")").css("z-index",parseFloat($(this).val()))}),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-font_size",function(){var s=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("font-size",parseFloat($(this).val()))}),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-line_height",function(){var s=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("line-height",parseFloat($(this).val())+"px")}),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-letter_spacing",function(){var s=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("letter-spacing",parseFloat($(this).val())+"px")}),$(".ksp-admin").on("change",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-font",function(){var s=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("font-family",$(this).find(":selected").data("family")),$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("font-weight",parseFloat($(this).find(":selected").data("weight"))),$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("font-style",$(this).find(":selected").data("style"))}),$(".ksp-admin #ksp-slides").on("click",".ksp-slide .ksp-layers .ksp-layers-actions .ksp-add-text-layer",function(){var s=$(this).closest(".ksp-slide");y(s)}),$(".ksp-admin").on("keyup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-inner_html",function(){var s=$(this).closest(".ksp-layer-settings").index(),e=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer");e.is("a")?e.find("> div").html($(this).val()):e.html($(this).val())}),$(".ksp-admin #ksp-slides").on("click",".ksp-slide .ksp-layers .ksp-layers-actions .ksp-add-button-layer",function(){var s=$(this).closest(".ksp-slide");f(s)}),g(),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-border_width",function(){var s=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("border",parseFloat($(this).val())+"px solid")}),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-border_radius",function(){var s=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("border-radius",parseFloat($(this).val())+"px")}),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-padding",function(){var s=$(this).closest(".ksp-layer-settings").index();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("padding-left",parseFloat($(this).val())+"px"),$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("padding-right",parseFloat($(this).val())+"px")}),$(".ksp-button-layer").each(function(){$(this).mouseover(function(){$(this).css("color",$(this).data("hcolor")),$(this).css("border-color",$(this).data("hborder-color")),$(this).css("background",$(this).data("hbackground-color"))}),$(this).mouseout(function(){$(this).css("color",$(this).data("color")),$(this).css("border-color",$(this).data("border-color")),$(this).css("background",$(this).data("background-color"))})}),$(".ksp-admin #ksp-slides").on("click",".ksp-slide .ksp-layers .ksp-layers-actions .ksp-add-image-layer",function(){var s=$(this).closest(".ksp-slide");u(s)}),$(".ksp-admin").on("click",".ksp-layers .ksp-layers-list .ksp-image-layer-settings .ksp-image-layer-upload-button",function(){var s=$(this).closest(".ksp-slide");h(s)}),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-height",function(){var s=$(this).closest(".ksp-layer-settings").index(),e=$(this).closest(".ksp-layer-settings");$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("height",parseFloat($(this).val())+"px"),$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("width","auto");var a=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").width();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("width",a),e.find(".ksp-layer-width").val(a)}),$(".ksp-admin").on("keyup mouseup",".ksp-layers .ksp-layers-list .ksp-layer-settings .ksp-layer-width",function(){var s=$(this).closest(".ksp-layer-settings").index(),e=$(this).closest(".ksp-layer-settings");$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("width",parseFloat($(this).val())+"px"),$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("height","auto");var a=$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").height();$(this).closest(".ksp-layers").find(".ksp-slide-editing-area .ksp-layer-wrap:eq("+s+") .ksp-layer").css("height",a),e.find(".ksp-layer-height").val(a)}),$(".ksp-admin .ksp-save-settings").click(function(s){v(),s.preventDefault()}),$(".ksp-admin .ksp-base .ksp-sliders-list .ksp-delete-slider").click(function(){var s=window.confirm(ksp_translations.slider_delete_confirm);s&&b($(this))}),$(".ksp-admin .ksp-base").on("click",".ksp-sliders-list .ksp-duplicate-slider",function(){x($(this))}),$(".ksp-admin .ksp-base").on("click",".ksp-sliders-list .ksp-export-slider",function(){w($(this))}),$(".ksp-admin .ksp-base").on("click",".ksp-import-slider",function(){$("#ksp-import-file").trigger("click")}),$(".ksp-admin .ksp-base").on("change","#ksp-import-file",function(){q()}),$(".ksp-live-preview").magnificPopup({type:"iframe",closeOnContentClick:!1,iframe:{markup:'<div class="mfp-iframe-preview"><div class="mfp-close"></div><iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe></div>'}})})}(jQuery);