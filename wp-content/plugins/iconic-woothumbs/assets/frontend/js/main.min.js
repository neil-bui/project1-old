!function(t,e){var n={cache:function(){n.cache_run=!1,n.cache_run||(n.els={},n.vars={},n.tpl={},n.products={},n.els.all_images_wrap=t(".iconic-woothumbs-all-images-wrap"),n.els.gallery=!1,n.els.video_template=t("#iconic-woothumbs-video-template"),n.vars.zoom_setup=!1,n.vars.window_resize_timeout=!1,n.vars.is_dragging_image_slide=!1,n.vars.loading_class="iconic-woothumbs-loading",n.vars.reset_class="iconic-woothumbs-reset",n.vars.thumbnails_active_class="iconic-woothumbs-thumbnails__slide--active",n.vars.images_active_class="iconic-woothumbs-images__slide--active",n.vars.wishlist_added_class="iconic-woothumbs-wishlist-buttons--added",n.vars.is_zoom_enabled=n.is_true(iconic_woothumbs_vars.settings.zoom_general_enable),n.vars.is_fullscreen_enabled=n.is_true(iconic_woothumbs_vars.settings.fullscreen_general_enable),n.vars.show_variation_trigger="iconic_woothumbs_show_variation",n.vars.loading_variation_trigger="iconic_woothumbs_loading_variation",n.vars.fullscreen_trigger=n.is_true(iconic_woothumbs_vars.settings.fullscreen_general_click_anywhere)?".iconic-woothumbs-fullscreen, img, .zm-handler":".iconic-woothumbs-fullscreen",n.vars.play_trigger=".iconic-woothumbs-play",n.tpl.fullscreen_button='<a href="javascript: void(0);" class="iconic-woothumbs-fullscreen" data-iconic-woothumbs-tooltip="'+iconic_woothumbs_vars.text.fullscreen+'"><i class="iconic-woothumbs-icon iconic-woothumbs-icon-fullscreen"></i></a>',n.tpl.play_button='<a href="javascript: void(0);" class="iconic-woothumbs-play" data-iconic-woothumbs-tooltip="'+iconic_woothumbs_vars.text.video+'"><i class="iconic-woothumbs-icon iconic-woothumbs-icon-play"></i></a>',n.tpl.temp_images_container='<div class="iconic-woothumbs-temp"><div class="iconic-woothumbs-temp__images"/><div class="iconic-woothumbs-icon iconic-woothumbs-temp__thumbnails"/></div>',n.tpl.image_slide='<div class="iconic-woothumbs-images__slide {{slide_class}}"><img class="iconic-woothumbs-images__image" src="{{image_src}}" data-srcset="{{image_src}}{{image_src_retina}}" data-large-image="{{large_image_src}}" data-large-image-width="{{large_image_width}}" data-large-image-height="{{large_image_height}}" width="{{image_width}}" height="{{image_height}}" title="{{title}}" alt="{{alt}}"></div>',n.tpl.thumbnail_slide='<div class="iconic-woothumbs-thumbnails__slide {{slide_class}}" data-index="{{index}}"><img class="iconic-woothumbs-thumbnails__image" src="{{image_src}}" data-srcset="{{image_src}}{{image_src_retina}}" title="{{title}}" alt="{{alt}}" width="{{image_width}}" height="{{image_height}}"></div>',n.tpl.retina_img_src=", {{image_src}} 2x",n.cache_run=!0)},on_load:function(){n.cache(),n.prepare_products(),n.init()},on_resize:function(){n.cache(),clearTimeout(n.vars.window_resize_timeout),n.vars.window_resize_timeout=setTimeout(function(){t(window).trigger("resize-end")},100)},is_true:function(t){return 1===parseInt(t)},is_active:function(e){return"woothemes_swatches"===e&&t("#swatches-and-photos-css").length>0},prepare_products:function(){n.els.all_images_wrap.length<=0||n.els.all_images_wrap.each(function(e,i){var s=t(i),o=s.closest(".product"),a=o.hasClass("product-type-variable"),r=!!a&&o.find("form.variations_form"),l=!!r&&r.attr("data-product_variations");n.products[e]={product:o,all_images_wrap:s,images:s.find(".iconic-woothumbs-images"),images_wrap:s.find(".iconic-woothumbs-images-wrap"),thumbnails:s.find(".iconic-woothumbs-thumbnails"),thumbnails_wrap:s.find(".iconic-woothumbs-thumbnails-wrap"),variations_form:r,variation_id_field:o.find("input[name=variation_id]"),wishlist_buttons:s.find(".iconic-woothumbs-wishlist-buttons"),wishlist_add_button:s.find(".iconic-woothumbs-wishlist-buttons__add"),wishlist_browse_button:s.find(".iconic-woothumbs-wishlist-buttons__browse"),variations_json:l,maintain_slide_index:"yes"===s.attr("data-maintain-slide-index"),variations:!!l&&t.parseJSON(l),product_id:!!r&&r.data("product_id"),default_images:t.parseJSON(s.attr("data-default")),imagezoom:!1,has_video:"yes"===s.data("has-video")}})},init:function(){n.products.length<=0||t.each(n.products,function(t,e){n.setup_sliders(e),n.watch_variations(e),n.setup_zoom(e),n.setup_fullscreen(e),n.setup_video(e),n.setup_tooltips()})},lazy_load_images:function(e){var i=e.images.find("img");i.length>0&&i.each(function(e,i){var n=t(i),s=n.attr("data-iconic-woothumbs-src");if("undefined"!=typeof s){var o=n.clone();o.attr("src",s).css({paddingTop:"",height:""}),n.replaceWith(o)}})},images_slider_args:function(e,i){var s=e.images.children().length;return i="undefined"!=typeof i&&s>i?i:0,{mode:iconic_woothumbs_vars.settings.carousel_general_mode,speed:parseInt(iconic_woothumbs_vars.settings.carousel_general_transition_speed),controls:s>1&&n.is_true(iconic_woothumbs_vars.settings.navigation_general_controls),infiniteLoop:s>1&&n.is_true(iconic_woothumbs_vars.settings.carousel_general_infinite_loop),touchEnabled:s>1,adaptiveHeight:!0,adaptiveHeightSpeed:150,auto:n.is_true(iconic_woothumbs_vars.settings.carousel_general_autoplay),pause:iconic_woothumbs_vars.settings.carousel_general_duration,pager:n.is_true(iconic_woothumbs_vars.settings.navigation_bullets_enable),prevText:'<i class="iconic-woothumbs-icon iconic-woothumbs-icon-prev"></i>',nextText:'<i class="iconic-woothumbs-icon iconic-woothumbs-icon-next"></i>',preventDefaultSwipeY:"vertical"===iconic_woothumbs_vars.settings.carousel_general_mode,startSlide:i,onSliderLoad:function(){n.go_to_thumbnail(i,e),n.setup_srcset(),this.getSlideCount()<=1&&e.images_wrap.find(".bx-controls").hide(),n.init_zoom(e.images.find(".iconic-woothumbs-images__slide--active img"),e),t(window).trigger("resize")},onSlideBefore:function(t,i,s){n.go_to_thumbnail(s,e),e.all_images_wrap.find("."+n.vars.images_active_class).removeClass(n.vars.images_active_class),t.addClass(n.vars.images_active_class),e.imagezoom&&e.imagezoom.destroy()},onSlideAfter:function(t,i,s){n.init_zoom(t.find("img"),e)}}},thumbnails_slider_args:function(t){return{mode:"above"===iconic_woothumbs_vars.settings.navigation_thumbnails_position||"below"===iconic_woothumbs_vars.settings.navigation_thumbnails_position||n.is_below_breakpoint()&&n.move_thumbnails_at_breakpoint()?"horizontal":"vertical",infiniteLoop:!1,speed:parseInt(iconic_woothumbs_vars.settings.navigation_thumbnails_transition_speed),minSlides:n.is_below_breakpoint()?parseInt(iconic_woothumbs_vars.settings.responsive_general_thumbnails_count):parseInt(iconic_woothumbs_vars.settings.navigation_thumbnails_count),maxSlides:n.is_below_breakpoint()?parseInt(iconic_woothumbs_vars.settings.responsive_general_thumbnails_count):parseInt(iconic_woothumbs_vars.settings.navigation_thumbnails_count),slideWidth:800,moveSlides:1,pager:!1,controls:!1,slideMargin:parseInt(iconic_woothumbs_vars.settings.navigation_thumbnails_spacing),onSliderLoad:function(){n.setup_srcset(),t.thumbnails_wrap.css({opacity:1,height:"auto"}),n.set_thumbnail_controls_visibility(this,t)},onSlideAfter:function(e,i,s){n.set_thumbnail_controls_visibility(this,t)}}},setup_sliders:function(e){e.images.imagesLoaded(function(){e.images_slider_data=e.images.bxSlider(n.images_slider_args(e)),n.lazy_load_images(e),e.images.on("mouseover",function(){e.images_slider_data&&e.images_slider_data.stopAuto()})}),n.has_sliding_thumbnails(e)&&(e.thumbnails.imagesLoaded(function(){n.setup_sliding_thumbnails(e)}),e.all_images_wrap.on("click",".iconic-woothumbs-thumbnails__control",function(){if(!e.all_images_wrap.hasClass(n.vars.loading_class)){var i=t(this).attr("data-direction");"next"===i?e.thumbnails_slider_data.goToNextSlide():e.thumbnails_slider_data.goToPrevSlide()}})),e.all_images_wrap.on("click",".iconic-woothumbs-thumbnails__slide",function(){if(!e.all_images_wrap.hasClass(n.vars.loading_class)&&e){var i=parseInt(t(this).attr("data-index"));n.set_active_thumbnail(e.thumbnails,i),e.images_slider_data.goToSlide(i)}}),e.all_images_wrap.on("click",".iconic-woothumbs-thumbnails__slide, .bx-next, .bx-prev, .iconic-woothumbs-zoom-prev, .iconic-woothumbs-zoom-next, .bx-pager-link",function(){e.images_slider_data.stopAuto()}),e.thumbnails.length>0&&n.position_thumbnails(e),t(window).on("resize",function(){n.has_sliding_thumbnails(e)&&n.setup_sliding_thumbnails(e),n.position_thumbnails(e)})},has_sliding_thumbnails:function(t){return t.thumbnails.length>0&&"sliding"===iconic_woothumbs_vars.settings.navigation_thumbnails_type},has_thumbnails:function(t){return t.thumbnails.length>0&&("sliding"===iconic_woothumbs_vars.settings.navigation_thumbnails_type||"stacked"===iconic_woothumbs_vars.settings.navigation_thumbnails_type)},move_thumbnails_at_breakpoint:function(){return n.is_true(iconic_woothumbs_vars.settings.responsive_general_thumbnails_below)&&"below"!==iconic_woothumbs_vars.settings.navigation_thumbnails_position},is_below_breakpoint:function(){return n.is_true(iconic_woothumbs_vars.settings.responsive_general_breakpoint_enable)&&n.viewport().width<=parseInt(iconic_woothumbs_vars.settings.responsive_general_breakpoint,10)},viewport:function(){var t=window,i="inner";return"innerWidth"in window||(i="client",t=e.documentElement||e.body),{width:t[i+"Width"],height:t[i+"Height"]}},setup_sliding_thumbnails:function(t){t.thumbnails_slider_data?t.thumbnails.reloadSlider(n.thumbnails_slider_args(t)):t.thumbnails_slider_data=t.thumbnails.bxSlider(n.thumbnails_slider_args(t))},position_thumbnails:function(t){var e=t.all_images_wrap.find(".iconic-woothumbs-thumbnails__control--right, .iconic-woothumbs-thumbnails__control--down"),i=t.all_images_wrap.find(".iconic-woothumbs-thumbnails__control--left, .iconic-woothumbs-thumbnails__control--up");n.is_below_breakpoint()&&n.move_thumbnails_at_breakpoint()?(t.all_images_wrap.removeClass("iconic-woothumbs-all-images-wrap--thumbnails-left iconic-woothumbs-all-images-wrap--thumbnails-right iconic-woothumbs-all-images-wrap--thumbnails-above").addClass("iconic-woothumbs-all-images-wrap--thumbnails-below"),t.images_wrap.after(t.thumbnails_wrap),t.thumbnails_wrap.removeClass("iconic-woothumbs-thumbnails-wrap--vertical").addClass("iconic-woothumbs-thumbnails-wrap--horizontal"),e.removeClass("iconic-woothumbs-thumbnails__control--down").addClass("iconic-woothumbs-thumbnails__control--right").find("i").removeClass("iconic-woothumbs-icon-down-open-mini").addClass("iconic-woothumbs-icon-right-open-mini"),i.removeClass("iconic-woothumbs-thumbnails__control--up").addClass("iconic-woothumbs-thumbnails__control--left").find("i").removeClass("iconic-woothumbs-icon-up-open-mini").addClass("iconic-woothumbs-icon-left-open-mini")):(t.all_images_wrap.removeClass("iconic-woothumbs-all-images-wrap--thumbnails-below").addClass("iconic-woothumbs-all-images-wrap--thumbnails-"+iconic_woothumbs_vars.settings.navigation_thumbnails_position),"left"!==iconic_woothumbs_vars.settings.navigation_thumbnails_position&&"above"!==iconic_woothumbs_vars.settings.navigation_thumbnails_position||t.images_wrap.before(t.thumbnails_wrap),"left"!==iconic_woothumbs_vars.settings.navigation_thumbnails_position&&"right"!==iconic_woothumbs_vars.settings.navigation_thumbnails_position||(t.thumbnails_wrap.removeClass("iconic-woothumbs-thumbnails-wrap--horizontal").addClass("iconic-woothumbs-thumbnails-wrap--vertical"),e.removeClass("iconic-woothumbs-thumbnails__control--right").addClass("iconic-woothumbs-thumbnails__control--down").find("i").removeClass("iconic-woothumbs-icon-right-open-mini").addClass("iconic-woothumbs-icon-down-open-mini"),i.removeClass("iconic-woothumbs-thumbnails__control--left").addClass("iconic-woothumbs-thumbnails__control--up").find("i").removeClass("iconic-woothumbs-icon-left-open-mini").addClass("iconic-woothumbs-icon-up-open-mini")))},set_thumbnail_controls_visibility:function(t,e){var i=n.get_last_thumbnail_index(e),s=t.getCurrentSlide(),o=e.thumbnails_wrap.find(".iconic-woothumbs-thumbnails__control--right, .iconic-woothumbs-thumbnails__control--down"),a=e.thumbnails_wrap.find(".iconic-woothumbs-thumbnails__control--left, .iconic-woothumbs-thumbnails__control--up");return t.getSlideCount()<=1||t.getSlideCount()<=parseInt(iconic_woothumbs_vars.settings.navigation_thumbnails_count)?void e.thumbnails_wrap.find(".iconic-woothumbs-thumbnails__control").hide():void(0===s?(o.show(),a.hide()):s===i?(o.hide(),a.show()):e.thumbnails_wrap.find(".iconic-woothumbs-thumbnails__control").show())},set_active_thumbnail:function(t,e){t.find(".iconic-woothumbs-thumbnails__slide").removeClass(n.vars.thumbnails_active_class),t.find(".iconic-woothumbs-thumbnails__slide[data-index="+e+"]").addClass(n.vars.thumbnails_active_class)},go_to_thumbnail:function(t,e){if(e.thumbnails_slider_data){var i=n.get_thumbnail_index(t,e);e.thumbnails_slider_data.goToSlide(i)}n.set_active_thumbnail(e.thumbnails,t)},get_thumbnail_index:function(t,e){if(1===parseInt(iconic_woothumbs_vars.settings.navigation_thumbnails_count))return t;var i=n.get_last_thumbnail_index(e),s=t>i?i:0===t?0:t-1;return s},get_last_thumbnail_index:function(t){var e=t.thumbnails.children().length,i=e-iconic_woothumbs_vars.settings.navigation_thumbnails_count;return i},watch_variations:function(e){e.variations_form&&(e.variation_id_field.on("change",function(){var i=parseInt(t(this).val()),s=parseInt(e.all_images_wrap.attr("data-showing"));isNaN(i)||i===s||n.get_variation_data(e,i)}),e.variations_form.on("reset_data",function(){setTimeout(function(){n.reset_images(e)},250)}),e.all_images_wrap.on(n.vars.loading_variation_trigger,function(t){e.all_images_wrap.addClass(n.vars.loading_class)}),e.all_images_wrap.on(n.vars.show_variation_trigger,function(t,i){n.load_images(e,i)}))},load_images:function(t,e){if(e){if(t.all_images_wrap.attr("data-showing",e.variation_id),e.jck_additional_images){var i=e.jck_additional_images.length;i>0&&(t.all_images_wrap.removeClass(n.vars.reset_class),n.replace_images(t,e.jck_additional_images,function(){t.all_images_wrap.trigger("iconic_woothumbs_images_loaded",[e])}))}}else t.all_images_wrap.removeClass(n.vars.loading_class)},replace_images:function(t,e,i){var s=n.create_temporary_images(e,t);s.container.imagesLoaded(function(){t.images.html(s.images.html()),t.images_slider_data&&t.images.imagesLoaded(function(){index=t.maintain_slide_index?t.images_slider_data.getCurrentSlide():0,t.images_slider_data.reloadSlider(n.images_slider_args(t,index))}),n.has_thumbnails(t)&&(t.thumbnails.html(s.thumbnails.html()),n.has_sliding_thumbnails(t)&&t.thumbnails.imagesLoaded(function(){t.thumbnails_slider_data.reloadSlider(n.thumbnails_slider_args(t))})),s.container.remove(),t.all_images_wrap.removeClass(n.vars.loading_class),void 0!==i&&i()})},prepare_retina_srcset:function(t){return n.tpl.retina_img_src.replace("{{image_src}}",t)},setup_srcset:function(){t("[data-srcset]").each(function(){t(this).attr("srcset",t(this).attr("data-srcset")).removeAttr("data-srcset")})},create_temporary_images:function(e,s){t("body").append(n.tpl.temp_images_container);var o=e.length,a={container:t(".iconic-woothumbs-temp"),images:t(".iconic-woothumbs-temp__images"),thumbnails:t(".iconic-woothumbs-temp__thumbnails")};if(t.each(e,function(t,e){var i="undefined"!=typeof e.single.retina,r="undefined"!=typeof e.thumb.retina,l=n.tpl.image_slide.replace(/{{image_src}}/g,e.single[0]).replace(/{{image_src_retina}}/g,i?n.prepare_retina_srcset(e.single.retina[0]):"").replace("{{large_image_src}}",e.large[0]).replace("{{large_image_width}}",e.large[1]).replace("{{large_image_height}}",e.large[2]).replace("{{image_width}}",e.single[1]).replace("{{image_height}}",e.single[2]).replace("{{alt}}",e.alt).replace("{{title}}",e.title).replace("{{slide_class}}",0===t?n.vars.images_active_class:"");if(a.images.append(l),o>1&&n.has_thumbnails(s)){var c=n.tpl.thumbnail_slide.replace(/{{image_src}}/g,e.thumb[0]).replace(/{{image_src_retina}}/g,r?n.prepare_retina_srcset(e.thumb.retina[0]):"").replace("{{index}}",t).replace("{{image_width}}",e.thumb[1]).replace("{{image_height}}",e.thumb[2]).replace("{{alt}}",e.alt).replace("{{title}}",e.title).replace("{{slide_class}}",0===t?n.vars.thumbnails_active_class:"");a.thumbnails.append(c)}}),s.thumbnails_slider_data&&1!==o&&o<iconic_woothumbs_vars.settings.navigation_thumbnails_count){var r=iconic_woothumbs_vars.settings.navigation_thumbnails_count-o;for(i=0;i<r;)a.thumbnails.append("<div/>"),i++}return a},reset_images:function(t){t.all_images_wrap.hasClass(n.vars.reset_class)||t.all_images_wrap.hasClass(n.vars.loading_class)||n.found_variation(t)||(t.all_images_wrap.trigger(n.vars.loading_variation_trigger),t.all_images_wrap.attr("data-showing",t.product_id),t.all_images_wrap.addClass(n.vars.reset_class),n.replace_images(t,t.default_images))},found_variation:function(t){var e=parseInt(t.variation_id_field.val());return!isNaN(e)},get_variation_data:function(e,i){e.all_images_wrap.trigger(n.vars.loading_variation_trigger);var s=!1;e.variations?(t.each(e.variations,function(t,e){e.variation_id===i&&(s=e)}),e.all_images_wrap.trigger(n.vars.show_variation_trigger,[s])):t.ajax({type:"GET",url:iconic_woothumbs_vars.ajaxurl,cache:!1,dataType:"jsonp",crossDomain:!0,data:{action:"iconic_woothumbs_get_variation",variation_id:i,product_id:e.product_id},success:function(t){t.success&&t.variation&&(s=t.variation,e.all_images_wrap.trigger(n.vars.show_variation_trigger,[s]))}})},trigger_photoswipe:function(e,i){var s=t(".iconic-woothumbs-pswp")[0],o=n.get_gallery_items(e),a={index:"undefined"==typeof i?o.index:o.items.length-1,shareEl:!1,closeOnScroll:!1,history:!1};n.els.gallery=new PhotoSwipe(s,PhotoSwipeUI_Default,o.items,a),n.els.gallery.init(),n.els.gallery.listen("close",function(){n.stop_video()})},stop_video:function(){var e=t(".iconic-woothumbs-video-wrapper iframe");if(e.length>0){var i=e.attr("src");e.attr("src",""),e.attr("src",i)}},setup_fullscreen:function(t){n.vars.is_fullscreen_enabled&&t.images_wrap.on("click",n.vars.fullscreen_trigger,function(){n.trigger_photoswipe(t)})},setup_video:function(t){t.images_wrap.on("click",n.vars.play_trigger,function(){n.trigger_photoswipe(t,!0)})},get_gallery_items:function(e){var i=e.images.children().not(".bx-clone"),s=[],o=i.filter("."+n.vars.images_active_class).index();return n.is_true(iconic_woothumbs_vars.settings.carousel_general_infinite_loop)&&"fade"!==iconic_woothumbs_vars.settings.carousel_general_mode&&(o-=1),n.is_true(iconic_woothumbs_vars.settings.fullscreen_general_enable)&&i.length>0&&i.each(function(e,i){var o=t(i).find("img"),a=o.attr("data-large-image"),r=o.attr("data-large-image-width"),l=o.attr("data-large-image-height"),c={src:a,w:r,h:l};if(n.is_true(iconic_woothumbs_vars.settings.fullscreen_general_image_title)){var d=o.attr("title");c.title=d}s.push(c)}),n.els.video_template.length>0&&s.push({html:n.els.video_template.html()}),{index:o,items:s}},setup_zoom:function(e){n.vars.is_zoom_enabled&&(e.all_images_wrap.on("touchmove",".iconic-woothumbs-images__image",function(){n.vars.is_dragging_image_slide=!0}),e.all_images_wrap.on("touchend",".iconic-woothumbs-images__image",function(e){n.vars.is_dragging_image_slide||(e.preventDefault(),t(this).click())}),e.all_images_wrap.on("touchstart",".iconic-woothumbs-images__image",function(){n.vars.is_dragging_image_slide=!1}),n.vars.zoom_setup||(t(window).on("resize-end",function(){var t=e.images.find(".iconic-woothumbs-images__slide--active img");n.init_zoom(t,e)}),n.vars.zoom_setup=!0))},init_zoom:function(e,i){if(n.vars.is_zoom_enabled){var s=e.width(),o=e.attr("data-large-image"),a=parseInt(e.attr("data-large-image-width"));s>=a||(i.imagezoom&&i.imagezoom.destroy(),e.ImageZoom({type:iconic_woothumbs_vars.settings.zoom_general_zoom_type,bigImageSrc:o,zoomSize:[iconic_woothumbs_vars.settings.zoom_outside_follow_zoom_lens_width,iconic_woothumbs_vars.settings.zoom_outside_follow_zoom_lens_height],zoomViewerClass:"follow"===iconic_woothumbs_vars.settings.zoom_general_zoom_type?"shape"+iconic_woothumbs_vars.settings.zoom_follow_zoom_zoom_shape:"shapesquare",position:iconic_woothumbs_vars.settings.zoom_outside_zoom_zoom_position,preload:!1,showDescription:!1,onShow:function(){n.add_zoom_controls(i)},onHide:function(){t(".bx-controls--hidden").removeClass("bx-controls--hidden").show()}}),i.imagezoom=e.data("imagezoom"))}},destroy_zoom:function(e){var i=e.images.find(".currZoom"),n=i.data("imagezoom");n&&"undefined"!=typeof n&&(i.removeClass("currZoom"),n.destroy()),t(".zm-viewer").remove(),t(".zm-handler").remove()},add_zoom_controls:function(e){var i=e.imagezoom.$viewer;if(i.find(".iconic-woothumbs-zoom-controls").length<=0&&"inner"===iconic_woothumbs_vars.settings.zoom_general_zoom_type){n.is_true(iconic_woothumbs_vars.settings.display_general_icons_tooltips)&&i.addClass("iconic-woothumbs-tooltips-enabled"),i.append('<div class="iconic-woothumbs-zoom-controls"></div>');var s=i.find(".iconic-woothumbs-zoom-controls");if(e.wishlist_buttons.length>0&&s.append(e.wishlist_buttons.clone()),n.is_true(iconic_woothumbs_vars.settings.fullscreen_general_enable)&&(s.append(n.tpl.fullscreen_button),i.on("click",n.vars.fullscreen_trigger,function(){n.trigger_photoswipe(e)})),e.has_video&&(s.append(n.tpl.play_button),i.on("click",n.vars.play_trigger,function(){n.trigger_photoswipe(e,!0)})),n.is_true(iconic_woothumbs_vars.settings.navigation_general_controls)&&e.images_slider_data.getSlideCount()>1&&(s.append('<a class="iconic-woothumbs-zoom-prev" href="javascript: void(0);"><i class="iconic-woothumbs-icon iconic-woothumbs-icon-prev"></i></a><a class="iconic-woothumbs-zoom-next" href="javascript: void(0);"><i class="iconic-woothumbs-icon iconic-woothumbs-icon-next"></i></a>'),i.on("click",".iconic-woothumbs-zoom-prev",function(){e.images_slider_data.goToPrevSlide()}),i.on("click",".iconic-woothumbs-zoom-next",function(){e.images_slider_data.goToNextSlide()})),n.is_true(iconic_woothumbs_vars.settings.navigation_bullets_enable)){var o=e.all_images_wrap.find(".bx-pager");if(o.children().length>1){var a=o.clone();s.append(a).wrap("<div class='iconic-woothumbs-zoom-bullets'></div>"),i.on("click",".iconic-woothumbs-zoom-bullets a",function(){var i=parseInt(t(this).attr("data-slide-index"));return e.images_slider_data.goToSlide(i),!1})}}n.setup_tooltips()}},setup_yith_wishlist:function(){t("body").on("added_to_wishlist",function(){t(".iconic-woothumbs-wishlist-buttons").addClass(n.vars.wishlist_added_class)})},setup_tooltips:function(){n.is_true(iconic_woothumbs_vars.settings.display_general_icons_tooltips)&&t("[data-iconic-woothumbs-tooltip]").each(function(){var e=t(this).attr("data-iconic-woothumbs-tooltip");t(this).tooltipster({content:e,debug:!1})})}};t(window).load(n.on_load),t("body").on("jckqv_open",n.on_load),t(window).resize(n.on_resize)}(jQuery,document),!function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}(this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||[];return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,s=i[n];e=e||[];for(var o=this._onceEvents&&this._onceEvents[t];s;){var a=o&&o[s];a&&(this.off(t,s),delete o[s]),s.apply(this,e),n+=a?0:1,s=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function s(t,e,o){return this instanceof s?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?o=e:i(this.options,e),o&&this.on("always",o),this.getImages(),r&&(this.jqDeferred=new r.Deferred),void setTimeout(function(){this.check()}.bind(this))):new s(t,e,o)}function o(t){this.img=t}function a(t,e){this.url=t,this.element=e,this.img=new Image}var r=t.jQuery,l=t.console;s.prototype=Object.create(e.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var s=i[n];this.addImage(s)}if("string"==typeof this.options.background){var o=t.querySelectorAll(this.options.background);for(n=0;n<o.length;n++){var a=o[n];this.addElementBackgroundImages(a)}}}};var c={1:!0,9:!0,11:!0};return s.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var s=n&&n[2];s&&this.addBackground(s,t),n=i.exec(e.backgroundImage)}},s.prototype.addImage=function(t){var e=new o(t);this.images.push(e)},s.prototype.addBackground=function(t,e){var i=new a(t,e);this.images.push(i)},s.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},s.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&l&&l.log("progress: "+i,t,e)},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},o.prototype=Object.create(e.prototype),o.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},o.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},o.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},o.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype=Object.create(o.prototype),a.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},a.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},s.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(r=e,r.fn.imagesLoaded=function(t,e){var i=new s(this,t,e);return i.jqDeferred.promise(r(this))})},s.makeJQueryPlugin(),s}),!function(t){var e={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function(){return!0},onSlideBefore:function(){return!0},onSlideAfter:function(){return!0},onSlideNext:function(){return!0},onSlidePrev:function(){return!0},onSliderResize:function(){return!0}};t.fn.bxSlider=function(n){if(0===this.length)return this;if(this.length>1)return this.each(function(){t(this).bxSlider(n)}),this;var s={},o=this,a=t(window).width(),r=t(window).height();if(!t(o).data("bxSlider")){var l=function(){t(o).data("bxSlider")||(s.settings=t.extend({},e,n),s.settings.slideWidth=parseInt(s.settings.slideWidth),s.children=o.children(s.settings.slideSelector),s.children.length<s.settings.minSlides&&(s.settings.minSlides=s.children.length),s.children.length<s.settings.maxSlides&&(s.settings.maxSlides=s.children.length),s.settings.randomStart&&(s.settings.startSlide=Math.floor(Math.random()*s.children.length)),s.active={index:s.settings.startSlide},s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.carousel&&(s.settings.preloadImages="all"),s.minThreshold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreshold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},s.interval=null,s.animProp="vertical"===s.settings.mode?"top":"left",s.usingCSS=s.settings.useCSS&&"fade"!==s.settings.mode&&function(){for(var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],i=0;i<e.length;i++)if(void 0!==t.style[e[i]])return s.cssPrefix=e[i].replace("Perspective","").toLowerCase(),s.animProp="-"+s.cssPrefix+"-transform",!0;return!1}(),"vertical"===s.settings.mode&&(s.settings.maxSlides=s.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(s.settings.slideSelector).each(function(){t(this).data("origStyle",t(this).attr("style"))}),c())},c=function(){var e=s.children.eq(s.settings.startSlide);o.wrap('<div class="'+s.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),s.viewport=o.parent(),s.settings.ariaLive&&!s.settings.ticker&&s.viewport.attr("aria-live","polite"),s.loader=t('<div class="bx-loading" />'),s.viewport.prepend(s.loader),o.css({width:"horizontal"===s.settings.mode?1e3*s.children.length+215+"%":"auto",position:"relative"}),s.usingCSS&&s.settings.easing?o.css("-"+s.cssPrefix+"-transition-timing-function",s.settings.easing):s.settings.easing||(s.settings.easing="swing"),s.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),s.viewport.parent().css({maxWidth:u()}),s.settings.pager||s.settings.controls||s.viewport.parent().css({margin:"0 auto 0px"}),s.children.css({"float":"horizontal"===s.settings.mode?"left":"none",listStyle:"none",position:"relative"}),s.children.css("width",m()),"horizontal"===s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginRight",s.settings.slideMargin),"vertical"===s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginBottom",s.settings.slideMargin),"fade"===s.settings.mode&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),s.children.eq(s.settings.startSlide).css({zIndex:s.settings.slideZIndex,display:"block"
})),s.controls.el=t('<div class="bx-controls" />'),s.settings.captions&&z(),s.active.last=s.settings.startSlide===_()-1,s.settings.video&&o.fitVids(),("all"===s.settings.preloadImages||s.settings.ticker)&&(e=s.children),s.settings.ticker?s.settings.pager=!1:(s.settings.controls&&S(),s.settings.auto&&s.settings.autoControls&&y(),s.settings.pager&&x(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el)),d(e,h)},d=function(e,i){var n=e.find('img:not([src=""]), iframe').length,s=0;return 0===n?void i():void e.find('img:not([src=""]), iframe').each(function(){t(this).one("load error",function(){++s===n&&i()}).each(function(){this.complete&&t(this).load()})})},h=function(){if(s.settings.infiniteLoop&&"fade"!==s.settings.mode&&!s.settings.ticker){var e="vertical"===s.settings.mode?s.settings.minSlides:s.settings.maxSlides,i=s.children.slice(0,e).clone(!0).addClass("bx-clone"),n=s.children.slice(-e).clone(!0).addClass("bx-clone");s.settings.ariaHidden&&(i.attr("aria-hidden",!0),n.attr("aria-hidden",!0)),o.append(i).prepend(n)}s.loader.remove(),f(),"vertical"===s.settings.mode&&(s.settings.adaptiveHeight=!0),s.viewport.height(g()),o.redrawSlider(),s.settings.onSliderLoad.call(o,s.active.index),s.initialized=!0,s.settings.responsive&&t(window).bind("resize",Z),s.settings.auto&&s.settings.autoStart&&(_()>1||s.settings.autoSlideForOnePage)&&D(),s.settings.ticker&&L(),s.settings.pager&&E(s.settings.startSlide),s.settings.controls&&A(),s.settings.touchEnabled&&!s.settings.ticker&&j(),s.settings.keyboardEnabled&&!s.settings.ticker&&t(document).keydown(q)},g=function(){var e=0,n=t();if("vertical"===s.settings.mode||s.settings.adaptiveHeight)if(s.carousel){var o=1===s.settings.moveSlides?s.active.index:s.active.index*v();for(n=s.children.eq(o),i=1;i<=s.settings.maxSlides-1;i++)n=o+i>=s.children.length?n.add(s.children.eq(i-1)):n.add(s.children.eq(o+i))}else n=s.children.eq(s.active.index);else n=s.children;return"vertical"===s.settings.mode?(n.each(function(i){e+=t(this).outerHeight()}),s.settings.slideMargin>0&&(e+=s.settings.slideMargin*(s.settings.minSlides-1))):e=Math.max.apply(Math,n.map(function(){return t(this).outerHeight(!1)}).get()),"border-box"===s.viewport.css("box-sizing")?e+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))+parseFloat(s.viewport.css("border-top-width"))+parseFloat(s.viewport.css("border-bottom-width")):"padding-box"===s.viewport.css("box-sizing")&&(e+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))),e},u=function(){var t="100%";return s.settings.slideWidth>0&&(t="horizontal"===s.settings.mode?s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin:s.settings.slideWidth),t},m=function(){var t=s.settings.slideWidth,e=s.viewport.width();if(0===s.settings.slideWidth||s.settings.slideWidth>e&&!s.carousel||"vertical"===s.settings.mode)t=e;else if(s.settings.maxSlides>1&&"horizontal"===s.settings.mode){if(e>s.maxThreshold)return t;e<s.minThreshold?t=(e-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides:s.settings.shrinkItems&&(t=Math.floor((e+s.settings.slideMargin)/Math.ceil((e+s.settings.slideMargin)/(t+s.settings.slideMargin))-s.settings.slideMargin))}return t},p=function(){var t=1,e=null;return"horizontal"===s.settings.mode&&s.settings.slideWidth>0?s.viewport.width()<s.minThreshold?t=s.settings.minSlides:s.viewport.width()>s.maxThreshold?t=s.settings.maxSlides:(e=s.children.first().width()+s.settings.slideMargin,t=Math.floor((s.viewport.width()+s.settings.slideMargin)/e)):"vertical"===s.settings.mode&&(t=s.settings.minSlides),t},_=function(){var t=0,e=0,i=0;if(s.settings.moveSlides>0)if(s.settings.infiniteLoop)t=Math.ceil(s.children.length/v());else for(;e<s.children.length;)++t,e=i+p(),i+=s.settings.moveSlides<=p()?s.settings.moveSlides:p();else t=Math.ceil(s.children.length/p());return t},v=function(){return s.settings.moveSlides>0&&s.settings.moveSlides<=p()?s.settings.moveSlides:p()},f=function(){var t,e,i;s.children.length>s.settings.maxSlides&&s.active.last&&!s.settings.infiniteLoop?"horizontal"===s.settings.mode?(e=s.children.last(),t=e.position(),b(-(t.left-(s.viewport.width()-e.outerWidth())),"reset",0)):"vertical"===s.settings.mode&&(i=s.children.length-s.settings.minSlides,t=s.children.eq(i).position(),b(-t.top,"reset",0)):(t=s.children.eq(s.active.index*v()).position(),s.active.index===_()-1&&(s.active.last=!0),void 0!==t&&("horizontal"===s.settings.mode?b(-t.left,"reset",0):"vertical"===s.settings.mode&&b(-t.top,"reset",0)))},b=function(e,i,n,a){var r,l;s.usingCSS?(l="vertical"===s.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)",o.css("-"+s.cssPrefix+"-transition-duration",n/1e3+"s"),"slide"===i?(o.css(s.animProp,l),0!==n?o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){t(e.target).is(o)&&(o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),M())}):M()):"reset"===i?o.css(s.animProp,l):"ticker"===i&&(o.css("-"+s.cssPrefix+"-transition-timing-function","linear"),o.css(s.animProp,l),0!==n?o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){t(e.target).is(o)&&(o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(a.resetValue,"reset",0),W())}):(b(a.resetValue,"reset",0),W()))):(r={},r[s.animProp]=e,"slide"===i?o.animate(r,n,s.settings.easing,function(){M()}):"reset"===i?o.css(s.animProp,e):"ticker"===i&&o.animate(r,n,"linear",function(){b(a.resetValue,"reset",0),W()}))},w=function(){for(var e="",i="",n=_(),o=0;n>o;o++)i="",s.settings.buildPager&&t.isFunction(s.settings.buildPager)||s.settings.pagerCustom?(i=s.settings.buildPager(o),s.pagerEl.addClass("bx-custom-pager")):(i=o+1,s.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+o+'" class="bx-pager-link">'+i+"</a></div>";s.pagerEl.html(e)},x=function(){s.settings.pagerCustom?s.pagerEl=t(s.settings.pagerCustom):(s.pagerEl=t('<div class="bx-pager" />'),s.settings.pagerSelector?t(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),w()),s.pagerEl.on("click touchend","a",k)},S=function(){s.controls.next=t('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=t('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.next.bind("click touchend",C),s.controls.prev.bind("click touchend",I),s.settings.nextSelector&&t(s.settings.nextSelector).append(s.controls.next),s.settings.prevSelector&&t(s.settings.prevSelector).append(s.controls.prev),s.settings.nextSelector||s.settings.prevSelector||(s.controls.directionEl=t('<div class="bx-controls-direction" />'),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl))},y=function(){s.controls.start=t('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=t('<div class="bx-controls-auto" />'),s.controls.autoEl.on("click",".bx-start",$),s.controls.autoEl.on("click",".bx-stop",T),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?t(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),P(s.settings.autoStart?"stop":"start")},z=function(){s.children.each(function(e){var i=t(this).find("img:first").attr("title");void 0!==i&&(""+i).length&&t(this).append('<div class="bx-caption"><span>'+i+"</span></div>")})},C=function(t){t.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),o.goToNextSlide())},I=function(t){t.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),o.goToPrevSlide())},$=function(t){o.startAuto(),t.preventDefault()},T=function(t){o.stopAuto(),t.preventDefault()},k=function(e){var i,n;e.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),i=t(e.currentTarget),void 0!==i.attr("data-slide-index")&&(n=parseInt(i.attr("data-slide-index")),n!==s.active.index&&o.goToSlide(n)))},E=function(e){var i=s.children.length;return"short"===s.settings.pagerType?(s.settings.maxSlides>1&&(i=Math.ceil(s.children.length/s.settings.maxSlides)),void s.pagerEl.html(e+1+s.settings.pagerShortSeparator+i)):(s.pagerEl.find("a").removeClass("active"),void s.pagerEl.each(function(i,n){t(n).find("a").eq(e).addClass("active")}))},M=function(){if(s.settings.infiniteLoop){var t="";0===s.active.index?t=s.children.eq(0).position():s.active.index===_()-1&&s.carousel?t=s.children.eq((_()-1)*v()).position():s.active.index===s.children.length-1&&(t=s.children.eq(s.children.length-1).position()),t&&("horizontal"===s.settings.mode?b(-t.left,"reset",0):"vertical"===s.settings.mode&&b(-t.top,"reset",0))}s.working=!1,s.settings.onSlideAfter.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)},P=function(t){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[t]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},A=function(){1===_()?(s.controls.prev.addClass("disabled"),s.controls.next.addClass("disabled")):!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(0===s.active.index?(s.controls.prev.addClass("disabled"),s.controls.next.removeClass("disabled")):s.active.index===_()-1?(s.controls.next.addClass("disabled"),s.controls.prev.removeClass("disabled")):(s.controls.prev.removeClass("disabled"),s.controls.next.removeClass("disabled")))},D=function(){s.settings.autoDelay>0?setTimeout(o.startAuto,s.settings.autoDelay):(o.startAuto(),t(window).focus(function(){o.startAuto()}).blur(function(){o.stopAuto()})),s.settings.autoHover&&o.hover(function(){s.interval&&(o.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(o.startAuto(!0),s.autoPaused=null)})},L=function(){var e,i,n,a,r,l,c,d,h=0;"next"===s.settings.autoDirection?o.append(s.children.clone().addClass("bx-clone")):(o.prepend(s.children.clone().addClass("bx-clone")),e=s.children.first().position(),h="horizontal"===s.settings.mode?-e.left:-e.top),b(h,"reset",0),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,s.settings.tickerHover&&(s.usingCSS?(a="horizontal"===s.settings.mode?4:5,s.viewport.hover(function(){i=o.css("-"+s.cssPrefix+"-transform"),n=parseFloat(i.split(",")[a]),b(n,"reset",0)},function(){d=0,s.children.each(function(e){d+="horizontal"===s.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)}),r=s.settings.speed/d,l="horizontal"===s.settings.mode?"left":"top",c=r*(d-Math.abs(parseInt(n))),W(c)})):s.viewport.hover(function(){o.stop()},function(){d=0,s.children.each(function(e){d+="horizontal"===s.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)}),r=s.settings.speed/d,l="horizontal"===s.settings.mode?"left":"top",c=r*(d-Math.abs(parseInt(o.css(l)))),W(c)})),W()},W=function(t){var e,i,n,a=t?t:s.settings.speed,r={left:0,top:0},l={left:0,top:0};"next"===s.settings.autoDirection?r=o.find(".bx-clone").first().position():l=s.children.first().position(),e="horizontal"===s.settings.mode?-r.left:-r.top,i="horizontal"===s.settings.mode?-l.left:-l.top,n={resetValue:i},b(e,"ticker",a,n)},H=function(e){var i=t(window),n={top:i.scrollTop(),left:i.scrollLeft()},s=e.offset();return n.right=n.left+i.width(),n.bottom=n.top+i.height(),s.right=s.left+e.outerWidth(),s.bottom=s.top+e.outerHeight(),!(n.right<s.left||n.left>s.right||n.bottom<s.top||n.top>s.bottom)},q=function(t){var e=document.activeElement.tagName.toLowerCase(),i="input|textarea",n=new RegExp(e,["i"]),s=n.exec(i);if(null==s&&H(o)){if(39===t.keyCode)return C(t),!1;if(37===t.keyCode)return I(t),!1}},j=function(){s.touch={start:{x:0,y:0},end:{x:0,y:0}},s.viewport.bind("touchstart MSPointerDown pointerdown",N),s.viewport.on("click",".bxslider a",function(t){s.viewport.hasClass("click-disabled")&&(t.preventDefault(),s.viewport.removeClass("click-disabled"))})},N=function(t){if(s.controls.el.addClass("disabled"),s.working)t.preventDefault(),s.controls.el.removeClass("disabled");else{s.touch.originalPos=o.position();var e=t.originalEvent,i="undefined"!=typeof e.changedTouches?e.changedTouches:[e];s.touch.start.x=i[0].pageX,s.touch.start.y=i[0].pageY,s.viewport.get(0).setPointerCapture&&(s.pointerId=e.pointerId,s.viewport.get(0).setPointerCapture(s.pointerId)),s.viewport.bind("touchmove MSPointerMove pointermove",O),s.viewport.bind("touchend MSPointerUp pointerup",R),s.viewport.bind("MSPointerCancel pointercancel",B)}},B=function(t){b(s.touch.originalPos.left,"reset",0),s.controls.el.removeClass("disabled"),s.viewport.unbind("MSPointerCancel pointercancel",B),s.viewport.unbind("touchmove MSPointerMove pointermove",O),s.viewport.unbind("touchend MSPointerUp pointerup",R),s.viewport.get(0).releasePointerCapture&&s.viewport.get(0).releasePointerCapture(s.pointerId)},O=function(t){var e=t.originalEvent,i="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=Math.abs(i[0].pageX-s.touch.start.x),o=Math.abs(i[0].pageY-s.touch.start.y),a=0,r=0;3*n>o&&s.settings.preventDefaultSwipeX?t.preventDefault():3*o>n&&s.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!==s.settings.mode&&s.settings.oneToOneTouch&&("horizontal"===s.settings.mode?(r=i[0].pageX-s.touch.start.x,a=s.touch.originalPos.left+r):(r=i[0].pageY-s.touch.start.y,a=s.touch.originalPos.top+r),b(a,"reset",0))},R=function(t){s.viewport.unbind("touchmove MSPointerMove pointermove",O),s.controls.el.removeClass("disabled");var e=t.originalEvent,i="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=0,a=0;s.touch.end.x=i[0].pageX,s.touch.end.y=i[0].pageY,"fade"===s.settings.mode?(a=Math.abs(s.touch.start.x-s.touch.end.x),a>=s.settings.swipeThreshold&&(s.touch.start.x>s.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())):("horizontal"===s.settings.mode?(a=s.touch.end.x-s.touch.start.x,n=s.touch.originalPos.left):(a=s.touch.end.y-s.touch.start.y,n=s.touch.originalPos.top),!s.settings.infiniteLoop&&(0===s.active.index&&a>0||s.active.last&&0>a)?b(n,"reset",200):Math.abs(a)>=s.settings.swipeThreshold?(0>a?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):b(n,"reset",200)),s.viewport.unbind("touchend MSPointerUp pointerup",R),s.viewport.get(0).releasePointerCapture&&s.viewport.get(0).releasePointerCapture(s.pointerId)},Z=function(e){if(s.initialized)if(s.working)window.setTimeout(Z,10);else{var i=t(window).width(),n=t(window).height();(a!==i||r!==n)&&(a=i,r=n,o.redrawSlider(),s.settings.onSliderResize.call(o,s.active.index))}},X=function(t){var e=p();s.settings.ariaHidden&&!s.settings.ticker&&(s.children.attr("aria-hidden","true"),s.children.slice(t,t+e).attr("aria-hidden","false"))},Y=function(t){return 0>t?s.settings.infiniteLoop?_()-1:s.active.index:t>=_()?s.settings.infiniteLoop?0:s.active.index:t};return o.goToSlide=function(e,i){var n,a,r,l,c=!0,d=0,h={left:0,top:0},u=null;if(s.oldIndex=s.active.index,s.active.index=Y(e),!s.working&&s.active.index!==s.oldIndex){if(s.working=!0,c=s.settings.onSlideBefore.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index),"undefined"!=typeof c&&!c)return s.active.index=s.oldIndex,void(s.working=!1);"next"===i?s.settings.onSlideNext.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)||(c=!1):"prev"===i&&(s.settings.onSlidePrev.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)||(c=!1)),s.active.last=s.active.index>=_()-1,(s.settings.pager||s.settings.pagerCustom)&&E(s.active.index),s.settings.controls&&A(),"fade"===s.settings.mode?(s.settings.adaptiveHeight&&s.viewport.height()!==g()&&s.viewport.animate({height:g()},s.settings.adaptiveHeightSpeed),s.children.filter(":visible").fadeOut(s.settings.speed).css({zIndex:0}),s.children.eq(s.active.index).css("zIndex",s.settings.slideZIndex+1).fadeIn(s.settings.speed,function(){t(this).css("zIndex",s.settings.slideZIndex),M()})):(s.settings.adaptiveHeight&&s.viewport.height()!==g()&&s.viewport.animate({height:g()},s.settings.adaptiveHeightSpeed),!s.settings.infiniteLoop&&s.carousel&&s.active.last?"horizontal"===s.settings.mode?(u=s.children.eq(s.children.length-1),h=u.position(),d=s.viewport.width()-u.outerWidth()):(n=s.children.length-s.settings.minSlides,h=s.children.eq(n).position()):s.carousel&&s.active.last&&"prev"===i?(a=1===s.settings.moveSlides?s.settings.maxSlides-v():(_()-1)*v()-(s.children.length-s.settings.maxSlides),u=o.children(".bx-clone").eq(a),h=u.position()):"next"===i&&0===s.active.index?(h=o.find("> .bx-clone").eq(s.settings.maxSlides).position(),s.active.last=!1):e>=0&&(l=e*parseInt(v()),h=s.children.eq(l).position()),"undefined"!=typeof h?(r="horizontal"===s.settings.mode?-(h.left-d):-h.top,b(r,"slide",s.settings.speed)):s.working=!1),s.settings.ariaHidden&&X(s.active.index*v())}},o.goToNextSlide=function(){if(s.settings.infiniteLoop||!s.active.last){var t=parseInt(s.active.index)+1;o.goToSlide(t,"next")}},o.goToPrevSlide=function(){if(s.settings.infiniteLoop||0!==s.active.index){var t=parseInt(s.active.index)-1;o.goToSlide(t,"prev")}},o.startAuto=function(t){s.interval||(s.interval=setInterval(function(){"next"===s.settings.autoDirection?o.goToNextSlide():o.goToPrevSlide()},s.settings.pause),s.settings.autoControls&&t!==!0&&P("stop"))},o.stopAuto=function(t){s.interval&&(clearInterval(s.interval),s.interval=null,s.settings.autoControls&&t!==!0&&P("start"))},o.getCurrentSlide=function(){return s.active.index},o.getCurrentSlideElement=function(){return s.children.eq(s.active.index)},o.getSlideElement=function(t){return s.children.eq(t)},o.getSlideCount=function(){return s.children.length},o.isWorking=function(){return s.working},o.redrawSlider=function(){s.children.add(o.find(".bx-clone")).outerWidth(m()),s.viewport.css("height",g()),s.settings.ticker||f(),s.active.last&&(s.active.index=_()-1),s.active.index>=_()&&(s.active.last=!0),s.settings.pager&&!s.settings.pagerCustom&&(w(),E(s.active.index)),s.settings.ariaHidden&&X(s.active.index*v())},o.destroySlider=function(){s.initialized&&(s.initialized=!1,t(".bx-clone",this).remove(),s.children.each(function(){void 0!==t(this).data("origStyle")?t(this).attr("style",t(this).data("origStyle")):t(this).removeAttr("style")}),void 0!==t(this).data("origStyle")?this.attr("style",t(this).data("origStyle")):t(this).removeAttr("style"),t(this).unwrap().unwrap(),s.controls.el&&s.controls.el.remove(),s.controls.next&&s.controls.next.remove(),s.controls.prev&&s.controls.prev.remove(),s.pagerEl&&s.settings.controls&&!s.settings.pagerCustom&&s.pagerEl.remove(),t(".bx-caption",this).remove(),s.controls.autoEl&&s.controls.autoEl.remove(),clearInterval(s.interval),s.settings.responsive&&t(window).unbind("resize",Z),s.settings.keyboardEnabled&&t(document).unbind("keydown",q),t(this).removeData("bxSlider"))},o.reloadSlider=function(e){void 0!==e&&(n=e),o.destroySlider(),l(),t(o).data("bxSlider",this)},l(),t(o).data("bxSlider",this),this}}}(jQuery),function(t,e,i){t.ImageZoom=function(i,n){function s(t){var e=parseInt(t);return e=isNaN(e)?0:e}var o=this;o.$el=t(i),o.$el.data("imagezoom",o),o.init=function(e){o.options=t.extend({},t.ImageZoom.defaults,e),o.$viewer=t('<div class="zm-viewer '+o.options.zoomViewerClass+'"></div>').appendTo("body"),o.$handler=t('<div class="zm-handler'+o.options.zoomHandlerClass+'"></div>').appendTo("body"),o.isBigImageReady=-1,o.$largeImg=null,o.isActive=!1,o.$handlerArea=null,o.isWebkit=/chrome/.test(navigator.userAgent.toLowerCase())||/safari/.test(navigator.userAgent.toLowerCase()),o.evt={x:-1,y:-1},o.options.bigImageSrc=""==o.options.bigImageSrc?o.$el.attr("src"):o.options.bigImageSrc,o.options.preload&&((new Image).src=this.options.bigImageSrc),o.callIndex=t.ImageZoom._calltimes+1,o.animateTimer=null,t.ImageZoom._calltimes+=1,t(document).bind("mousemove.imagezoom"+o.callIndex,function(t){o.isActive&&o.moveHandler(t.pageX,t.pageY)}),o.$el.bind("mouseover.imagezoom",function(t){o.isActive=!0,o.showViewer(t)})},o.moveHandler=function(t,i){var n=o.$el.offset(),a=o.$el.outerWidth(!1),r=o.$el.outerHeight(!1);if(t>=n.left&&t<=n.left+a&&i>=n.top&&i<=n.top+r){if(n.left=n.left+s(o.$el.css("borderLeftWidth"))+s(o.$el.css("paddingLeft")),n.top=n.top+s(o.$el.css("borderTopWidth"))+s(o.$el.css("paddingTop")),a=o.$el.width(),r=o.$el.height(),t>=n.left&&t<=n.left+a&&i>=n.top&&i<=n.top+r&&(o.evt={x:t,y:i},"follow"==o.options.type&&o.$viewer.css({top:i-o.$viewer.outerHeight(!1)/2,left:t-o.$viewer.outerWidth(!1)/2}),1==o.isBigImageReady)){var l,c,d=i-n.top,h=t-n.left;if("inner"==o.options.type)l=-o.$largeImg.height()*d/r+d,c=-o.$largeImg.width()*h/a+h;else if("standard"==o.options.type){var g=h-o.$handlerArea.width()/2,u=d-o.$handlerArea.height()/2,m=o.$handlerArea.width(),p=o.$handlerArea.height();g<0?g=0:g>a-m&&(g=a-m),u<0?u=0:u>r-p&&(u=r-p),c=-g/o.scale,l=-u/o.scale,o.isWebkit?(o.$handlerArea.css({opacity:.99}),setTimeout(function(){o.$handlerArea.css({top:u,left:g,opacity:1})},0)):o.$handlerArea.css({top:u,left:g})}else"follow"==o.options.type&&(l=-o.$largeImg.height()/r*d+o.options.zoomSize[1]/2,c=-o.$largeImg.width()/a*h+o.options.zoomSize[0]/2,-l>o.$largeImg.height()-o.options.zoomSize[1]?l=-(o.$largeImg.height()-o.options.zoomSize[1]):l>0&&(l=0),-c>o.$largeImg.width()-o.options.zoomSize[0]?c=-(o.$largeImg.width()-o.options.zoomSize[0]):c>0&&(c=0));o.options.smoothMove?(e.clearTimeout(o.animateTimer),o.smoothMove(c,l)):o.$viewer.find("img").css({top:l,left:c})}}else o.isActive=!1,o.$viewer.hide(),o.$handler.hide(),o.options.onHide(o),e.clearTimeout(o.animateTimer),o.animateTimer=null},o.showViewer=function(e){var i=o.$el.offset().top,n=s(o.$el.css("borderTopWidth")),a=s(o.$el.css("paddingTop")),r=o.$el.offset().left,l=s(o.$el.css("borderLeftWidth")),c=s(o.$el.css("paddingLeft"));i=i+n+a,r=r+l+c;var d=o.$el.width(),h=o.$el.height();if(o.isBigImageReady<1&&t("div",o.$viewer).remove(),"inner"==o.options.type)o.$viewer.css({top:i,left:r,width:d,height:h}).show();else if("standard"==o.options.type){var g,u,m=""==o.options.alignTo?o.$el:t("#"+o.options.alignTo);"left"==o.options.position?(g=m.offset().left-o.options.zoomSize[0]-o.options.offset[0],u=m.offset().top+o.options.offset[1]):"right"==o.options.position&&(g=m.offset().left+m.width()+o.options.offset[0],u=m.offset().top+o.options.offset[1]),o.$viewer.css({top:u,left:g,width:o.options.zoomSize[0],height:o.options.zoomSize[1]}).show(),o.$handlerArea&&(o.scale=d/o.$largeImg.width(),o.$handlerArea.css({width:o.$viewer.width()*o.scale,height:o.$viewer.height()*o.scale}))}else"follow"==o.options.type&&o.$viewer.css({width:o.options.zoomSize[0],height:o.options.zoomSize[1],top:e.pageY-o.options.zoomSize[1]/2,left:e.pageX-o.options.zoomSize[0]/2}).show();o.$handler.css({top:i,left:r,width:d,height:h}).show(),o.options.onShow(o),o.isBigImageReady==-1&&(o.isBigImageReady=0,fastImg(o.options.bigImageSrc,function(){if(t.trim(t(this).attr("src"))==t.trim(o.options.bigImageSrc)){if(o.$viewer.append('<img src="'+o.$el.attr("src")+'" class="zm-fast" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),o.isBigImageReady=1,o.$largeImg=t('<img src="'+o.options.bigImageSrc+'" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),o.$viewer.append(o.$largeImg),"standard"==o.options.type){var i=d/this.width;o.$handlerArea=t('<div class="zm-handlerarea" style="width:'+o.$viewer.width()*i+"px;height:"+o.$viewer.height()*i+'px"></div>').appendTo(o.$handler),o.scale=i}o.evt.x==-1&&o.evt.y==-1?o.moveHandler(e.pageX,e.pageY):o.moveHandler(o.evt.x,o.evt.y),o.options.showDescription&&o.$el.attr("alt")&&""!=t.trim(o.$el.attr("alt"))&&o.$viewer.append('<div class="'+o.options.descriptionClass+'">'+o.$el.attr("alt")+"</div>")}},function(){},function(){}))},o.changeImage=function(t,e){this.$el.attr("src",t),this.isBigImageReady=-1,this.options.bigImageSrc="string"==typeof e?e:t,o.options.preload&&((new Image).src=this.options.bigImageSrc),this.$viewer.hide().empty(),this.$handler.hide().empty(),this.$handlerArea=null},o.changeZoomSize=function(t,e){o.options.zoomSize=[t,e]},o.destroy=function(){t(document).unbind("mousemove.imagezoom"+o.callIndex),this.$el.unbind(".imagezoom"),this.$viewer.remove(),this.$handler.remove(),this.$el.removeData("imagezoom")},o.smoothMove=function(t,i){var n=10,s=parseInt(o.$largeImg.css("top"));s=isNaN(s)?0:s;var a=parseInt(o.$largeImg.css("left"));if(a=isNaN(a)?0:a,i=parseInt(i),t=parseInt(t),s==i&&a==t)return e.clearTimeout(o.animateTimer),void(o.animateTimer=null);var r=i-s,l=t-a,c=s+r/Math.abs(r)*Math.ceil(Math.abs(r/n)),d=a+l/Math.abs(l)*Math.ceil(Math.abs(l/n));o.$viewer.find("img").css({top:c,left:d}),o.animateTimer=setTimeout(function(){o.smoothMove(t,i)},10)},o.init(n)},t.ImageZoom.defaults={bigImageSrc:"",preload:!0,type:"inner",smoothMove:!0,position:"right",offset:[10,0],alignTo:"",zoomSize:[100,100],descriptionClass:"zm-description",zoomViewerClass:"",zoomHandlerClass:"",showDescription:!0,onShow:function(t){},onHide:function(t){}},t.ImageZoom._calltimes=0,t.fn.ImageZoom=function(e){return this.each(function(){new t.ImageZoom(this,e)})}}(jQuery,window);var fastImg=function(){var t=[],e=null,i=function(){for(var e=0;e<t.length;e++)t[e].end?t.splice(e--,1):t[e]();!t.length&&n()},n=function(){clearInterval(e),e=null};return function(n,s,o,a){var r,l,c,d,h,g=new Image;return g.src=n,g.complete?(s.call(g),void(o&&o.call(g))):(l=g.width,c=g.height,g.onerror=function(){a&&a.call(g),r.end=!0,g=g.onload=g.onerror=null},r=function(){d=g.width,h=g.height,(d!==l||h!==c||d*h>1024)&&(s.call(g),r.end=!0)},r(),g.onload=function(){!r.end&&r(),o&&o.call(g),g=g.onload=g.onerror=null},void(r.end||(t.push(r),null===e&&(e=setInterval(i,40)))))}}();!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(i){return e(t,i)}):"object"==typeof exports?e(t,require("jquery")):e(t,t.jQuery)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function i(t,e){for(var i=t.length;--i;)if(+t[i]!==+e[i])return!1;return!0}function n(t){var i={range:!0,animate:!0};return"boolean"==typeof t?i.animate=t:e.extend(i,t),i}function s(t,i,n,s,o,a,r,l,c){this.elements="array"===e.type(t)?[+t[0],+t[2],+t[4],+t[1],+t[3],+t[5],0,0,1]:[t,i,n,s,o,a,r||0,l||0,c||1]}function o(t,e,i){this.elements=[t,e,i]}function a(t,i){if(!(this instanceof a))return new a(t,i);1!==t.nodeType&&e.error("Panzoom called on non-Element node"),e.contains(h,t)||e.error("Panzoom element must be attached to the document");var n=e.data(t,g);if(n)return n;this.options=i=e.extend({},a.defaults,i),this.elem=t;var s=this.$elem=e(t);this.$set=i.$set&&i.$set.length?i.$set:s,this.$doc=e(t.ownerDocument||h),this.$parent=s.parent(),this.isSVG=v.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=!this.isSVG&&e.cssProps.transform.replace(_,"-$1").toLowerCase(),this._buildTransition(),this.resetDimensions();var o=e(),r=this;e.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(t,e){r[e]=i[e]||o}),this.enable(),e.data(t,g,this)}var r="over out down up move enter leave cancel".split(" "),l=e.extend({},e.event.mouseHooks),c={};if(t.PointerEvent)e.each(r,function(t,i){e.event.fixHooks[c[i]="pointer"+i]=l});else{var d=l.props;l.props=d.concat(["touches","changedTouches","targetTouches","altKey","ctrlKey","metaKey","shiftKey"]),l.filter=function(t,e){var i,n=d.length;if(!e.pageX&&e.touches&&(i=e.touches[0]))for(;n--;)t[d[n]]=i[d[n]];return t},e.each(r,function(t,i){if(2>t)c[i]="mouse"+i;else{var n="touch"+("down"===i?"start":"up"===i?"end":i);e.event.fixHooks[n]=l,c[i]=n+" mouse"+i}})}e.pointertouch=c;var h=t.document,g="__pz__",u=Array.prototype.slice,m=!!t.PointerEvent,p=function(){var t=h.createElement("input");return t.setAttribute("oninput","return"),"function"==typeof t.oninput}(),_=/([A-Z])/g,v=/^http:[\w\.\/]+svg$/,f=/^inline/,b="(\\-?[\\d\\.e]+)",w="\\,?\\s*",x=new RegExp("^matrix\\("+b+w+b+w+b+w+b+w+b+w+b+"\\)$");return s.prototype={x:function(t){var e=t instanceof o,i=this.elements,n=t.elements;return e&&3===n.length?new o(i[0]*n[0]+i[1]*n[1]+i[2]*n[2],i[3]*n[0]+i[4]*n[1]+i[5]*n[2],i[6]*n[0]+i[7]*n[1]+i[8]*n[2]):n.length===i.length&&new s(i[0]*n[0]+i[1]*n[3]+i[2]*n[6],i[0]*n[1]+i[1]*n[4]+i[2]*n[7],i[0]*n[2]+i[1]*n[5]+i[2]*n[8],i[3]*n[0]+i[4]*n[3]+i[5]*n[6],i[3]*n[1]+i[4]*n[4]+i[5]*n[7],i[3]*n[2]+i[4]*n[5]+i[5]*n[8],i[6]*n[0]+i[7]*n[3]+i[8]*n[6],i[6]*n[1]+i[7]*n[4]+i[8]*n[7],i[6]*n[2]+i[7]*n[5]+i[8]*n[8])},inverse:function(){var t=1/this.determinant(),e=this.elements;return new s(t*(e[8]*e[4]-e[7]*e[5]),t*-(e[8]*e[1]-e[7]*e[2]),t*(e[5]*e[1]-e[4]*e[2]),t*-(e[8]*e[3]-e[6]*e[5]),t*(e[8]*e[0]-e[6]*e[2]),t*-(e[5]*e[0]-e[3]*e[2]),t*(e[7]*e[3]-e[6]*e[4]),t*-(e[7]*e[0]-e[6]*e[1]),t*(e[4]*e[0]-e[3]*e[1]))},determinant:function(){var t=this.elements;return t[0]*(t[8]*t[4]-t[7]*t[5])-t[3]*(t[8]*t[1]-t[7]*t[2])+t[6]*(t[5]*t[1]-t[4]*t[2])}},o.prototype.e=s.prototype.e=function(t){return this.elements[t]},a.rmatrix=x,a.events=e.pointertouch,a.defaults={eventNamespace:".panzoom",transition:!0,cursor:"move",disablePan:!1,disableZoom:!1,increment:.3,minScale:.4,maxScale:5,rangeStep:.05,duration:200,easing:"ease-in-out",contain:!1},a.prototype={constructor:a,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),e.removeData(this.elem,g)},resetDimensions:function(){var t=this.$parent;this.container={width:t.innerWidth(),height:t.innerHeight()};var i,n=t.offset(),s=this.elem,o=this.$elem;this.isSVG?(i=s.getBoundingClientRect(),i={left:i.left-n.left,top:i.top-n.top,width:i.width,height:i.height,margin:{left:0,top:0}}):i={left:e.css(s,"left",!0)||0,top:e.css(s,"top",!0)||0,width:o.innerWidth(),height:o.innerHeight(),margin:{top:e.css(s,"marginTop",!0)||0,left:e.css(s,"marginLeft",!0)||0}},i.widthBorder=e.css(s,"borderLeftWidth",!0)+e.css(s,"borderRightWidth",!0)||0,i.heightBorder=e.css(s,"borderTopWidth",!0)+e.css(s,"borderBottomWidth",!0)||0,this.dimensions=i},reset:function(t){t=n(t);var e=this.setMatrix(this._origTransform,t);t.silent||this._trigger("reset",e)},resetZoom:function(t){t=n(t);var e=this.getMatrix(this._origTransform);t.dValue=e[3],this.zoom(e[0],t)},resetPan:function(t){var e=this.getMatrix(this._origTransform);this.pan(e[4],e[5],n(t))},setTransform:function(t){for(var i=this.isSVG?"attr":"style",n=this.$set,s=n.length;s--;)e[i](n[s],"transform",t)},getTransform:function(t){var i=this.$set,n=i[0];return t?this.setTransform(t):t=e[this.isSVG?"attr":"style"](n,"transform"),"none"===t||x.test(t)||this.setTransform(t=e.css(n,"transform")),t||"none"},getMatrix:function(t){var e=x.exec(t||this.getTransform());return e&&e.shift(),e||[1,0,0,1,0,0]},setMatrix:function(t,i){if(!this.disabled){i||(i={}),"string"==typeof t&&(t=this.getMatrix(t));var n,s,o,a,r,l,c,d,h,g,u=+t[0],m=this.$parent,p="undefined"!=typeof i.contain?i.contain:this.options.contain;return p&&(n=this._checkDims(),s=this.container,h=n.width+n.widthBorder,g=n.height+n.heightBorder,o=(h*Math.abs(u)-s.width)/2,a=(g*Math.abs(u)-s.height)/2,c=n.left+n.margin.left,d=n.top+n.margin.top,"invert"===p?(r=h>s.width?h-s.width:0,l=g>s.height?g-s.height:0,o+=(s.width-h)/2,a+=(s.height-g)/2,t[4]=Math.max(Math.min(t[4],o-c),-o-c-r),t[5]=Math.max(Math.min(t[5],a-d),-a-d-l+n.heightBorder)):(a+=n.heightBorder/2,r=s.width>h?s.width-h:0,l=s.height>g?s.height-g:0,"center"===m.css("textAlign")&&f.test(e.css(this.elem,"display"))?r=0:o=a=0,t[4]=Math.min(Math.max(t[4],o-c),-o-c+r),t[5]=Math.min(Math.max(t[5],a-d),-a-d+l))),
"skip"!==i.animate&&this.transition(!i.animate),i.range&&this.$zoomRange.val(u),this.setTransform("matrix("+t.join(",")+")"),i.silent||this._trigger("change",t),t}},isPanning:function(){return this.panning},transition:function(t){if(this._transition)for(var i=t||!this.options.transition?"none":this._transition,n=this.$set,s=n.length;s--;)e.style(n[s],"transition")!==i&&e.style(n[s],"transition",i)},pan:function(t,e,i){if(!this.options.disablePan){i||(i={});var n=i.matrix;n||(n=this.getMatrix()),i.relative&&(t+=+n[4],e+=+n[5]),n[4]=t,n[5]=e,this.setMatrix(n,i),i.silent||this._trigger("pan",n[4],n[5])}},zoom:function(t,i){"object"==typeof t?(i=t,t=null):i||(i={});var n=e.extend({},this.options,i);if(!n.disableZoom){var a=!1,r=n.matrix||this.getMatrix();"number"!=typeof t&&(t=+r[0]+n.increment*(t?-1:1),a=!0),t>n.maxScale?t=n.maxScale:t<n.minScale&&(t=n.minScale);var l=n.focal;if(l&&!n.disablePan){var c=this._checkDims(),d=l.clientX,h=l.clientY;this.isSVG||(d-=(c.width+c.widthBorder)/2,h-=(c.height+c.heightBorder)/2);var g=new o(d,h,1),u=new s(r),m=this.parentOffset||this.$parent.offset(),p=new s(1,0,m.left-this.$doc.scrollLeft(),0,1,m.top-this.$doc.scrollTop()),_=u.inverse().x(p.inverse().x(g)),v=t/r[0];u=u.x(new s([v,0,0,v,0,0])),g=p.x(u.x(_)),r[4]=+r[4]+(d-g.e(0)),r[5]=+r[5]+(h-g.e(1))}r[0]=t,r[3]="number"==typeof n.dValue?n.dValue:t,this.setMatrix(r,{animate:"boolean"==typeof n.animate?n.animate:a,range:!n.noSetRange}),n.silent||this._trigger("zoom",r[0],n)}},option:function(t,i){var n;if(!t)return e.extend({},this.options);if("string"==typeof t){if(1===arguments.length)return void 0!==this.options[t]?this.options[t]:null;n={},n[t]=i}else n=t;this._setOptions(n)},_setOptions:function(t){e.each(t,e.proxy(function(t,i){switch(t){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[t]=i,t){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[t]=i;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":e.style(this.elem,"cursor",i);break;case"minScale":this.$zoomRange.attr("min",i);break;case"maxScale":this.$zoomRange.attr("max",i);break;case"rangeStep":this.$zoomRange.attr("step",i);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"$set":i instanceof e&&i.length&&(this.$set=i,this._initStyle(),this._buildTransform())}},this))},_initStyle:function(){var t={"backface-visibility":"hidden","transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(t.cursor=this.options.cursor),this.$set.css(t);var i=this.$parent;i.length&&!e.nodeName(i[0],"body")&&(t={overflow:"hidden"},"static"===i.css("position")&&(t.position="relative"),i.css(t))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var t=this,i=this.options,n=i.eventNamespace,s=m?"pointerdown"+n:"touchstart"+n+" mousedown"+n,o=m?"pointerup"+n:"touchend"+n+" click"+n,r={},l=this.$reset,c=this.$zoomRange;if(e.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var t=i["on"+this];e.isFunction(t)&&(r["panzoom"+this.toLowerCase()+n]=t)}),i.disablePan&&i.disableZoom||(r[s]=function(e){var n;("touchstart"===e.type?!(n=e.touches)||(1!==n.length||i.disablePan)&&2!==n.length:i.disablePan||1!==e.which)||(e.preventDefault(),e.stopPropagation(),t._startMove(e,n))}),this.$elem.on(r),l.length&&l.on(o,function(e){e.preventDefault(),t.reset()}),c.length&&c.attr({step:i.rangeStep===a.defaults.rangeStep&&c.attr("step")||i.rangeStep,min:i.minScale,max:i.maxScale}).prop({value:this.getMatrix()[0]}),!i.disableZoom){var d=this.$zoomIn,h=this.$zoomOut;d.length&&h.length&&(d.on(o,function(e){e.preventDefault(),t.zoom()}),h.on(o,function(e){e.preventDefault(),t.zoom(!0)})),c.length&&(r={},r[(m?"pointerdown":"mousedown")+n]=function(){t.transition(!0)},r[(p?"input":"change")+n]=function(){t.zoom(+this.value,{noSetRange:!0})},c.on(r))}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var t=this.options;this._transition=this._transform+" "+t.duration+"ms "+t.easing}},_checkDims:function(){var t=this.dimensions;return t.width&&t.height||this.resetDimensions(),this.dimensions},_getDistance:function(t){var e=t[0],i=t[1];return Math.sqrt(Math.pow(Math.abs(i.clientX-e.clientX),2)+Math.pow(Math.abs(i.clientY-e.clientY),2))},_getMiddle:function(t){var e=t[0],i=t[1];return{clientX:(i.clientX-e.clientX)/2+e.clientX,clientY:(i.clientY-e.clientY)/2+e.clientY}},_trigger:function(t){"string"==typeof t&&(t="panzoom"+t),this.$elem.triggerHandler(t,[this].concat(u.call(arguments,1)))},_startMove:function(t,n){var s,o,a,r,l,c,d,g,u=this,p=this.options,_=p.eventNamespace,v=this.getMatrix(),f=v.slice(0),b=+f[4],w=+f[5],x={matrix:v,animate:"skip"};m?(o="pointermove",a="pointerup"):"touchstart"===t.type?(o="touchmove",a="touchend"):(o="mousemove",a="mouseup"),o+=_,a+=_,this.transition(!0),this.panning=!0,this._trigger("start",t,n),n&&2===n.length?(r=this._getDistance(n),l=+v[0],c=this._getMiddle(n),s=function(t){t.preventDefault();var e=u._getMiddle(n=t.touches),i=u._getDistance(n)-r;u.zoom(i*(p.increment/100)+l,{focal:e,matrix:v,animate:!1}),u.pan(+v[4]+e.clientX-c.clientX,+v[5]+e.clientY-c.clientY,x),c=e}):(d=t.pageX,g=t.pageY,s=function(t){t.preventDefault(),u.pan(b+t.pageX-d,w+t.pageY-g,x)}),e(h).off(_).on(o,s).on(a,function(t){t.preventDefault(),e(this).off(_),u.panning=!1,t.type="panzoomend",u._trigger(t,v,!i(v,f))})}},e.Panzoom=a,e.fn.panzoom=function(t){var i,n,s,o;return"string"==typeof t?(o=[],n=u.call(arguments,1),this.each(function(){i=e.data(this,g),i?"_"!==t.charAt(0)&&"function"==typeof(s=i[t])&&void 0!==(s=s.apply(i,n))&&o.push(s):o.push(void 0)}),o.length?1===o.length?o[0]:o:this):this.each(function(){new a(this,t)})},a});