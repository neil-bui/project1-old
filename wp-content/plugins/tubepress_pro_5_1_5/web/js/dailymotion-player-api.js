/**
 * @license
 *
 * Copyright 2006 - 2016 TubePress LLC (http://tubepress.com/).
 * This file is part of TubePress Pro.
 * REDISTRIBUTION PROHIBITED. Please see http://tubepress.com/license for details.
 */
var tubePressDailymotionPlayerApi;!function(n,e){"use strict";var t=e.Beacon,i=e.Lang.Utils,a="tubepress",r="dailymotion",l=".",o=!0,s=!o,u=a+l+r+l+"allApisAvailable",c=function(){var a=s,r=i.isDefined,l=s,c=function(){return r(n.DM)&&r(n.DM.player)},d=function(){return r(e.PlayerApi)},p=function(){return l?l:d()&&c()},y=function(){l=o,t.publish(u)},P=function(){if(!a&&!c()){a=o;var n="https://api.dmcdn.net/all.js";e.DomInjector.loadJs(n),i.callWhenTrue(y,p,250)}};return{allApisLoaded:p,loadDailymotionApi:P}}(),d=function(){var n=null,t=function(){null===n&&(n=e.PlayerApi.EventUtility)},i=function(e){t(),n.publishStart(e.target)},a=function(e){t(),n.publishPause(e.target)},r=function(e){t(),n.publishStop(e.target)};return{onPlay:i,onPause:a,onFinish:r}}(),p=function(){var i=[],a=function(t,i){var a,l=t.replace(r+"_",""),o=e.Vendors.jQuery,s=o("#"+i)[0],u=n.DM;u._domain.www=DM._domain.www.replace(/^https?\:/,""),u.Player._PROTOCOL=n.location&&/^https?:$/.test(n.location.protocol)?n.location.protocol:"http:",u.copy(s,u.Player),u.Player._installHandlers(),s.src+="&api="+u.Player.API_MODE,u.Player._INSTANCES[i]!=s&&(u.Player._INSTANCES[i]=s,s.addEventListener("unload",function(){delete u.Player._INSTANCES[i]})),s.addEventListener("end",d.onFinish,!1),s.addEventListener("pause",d.onPause,!1),s.addEventListener("playing",d.onPlay,!1),a={guid:i,domId:i,itemId:l,provider:r,dmPlayer:s},e.PlayerApi.Registry.register(i,a)},l=function(){var n,e=0;for(e;e<i.length;e+=1)n=i[e],a(n[0],n[1])},o=function(n,e){c.allApisLoaded()?a(n,e):(i.push([n,e]),1===i.length&&(c.loadDailymotionApi(),t.subscribe(u,l)))};return{register:o}}();e.AsyncUtil.processQueueCalls("tubePressDailymotionPlayerApi",p)}(window,TubePress);
