/**
 * @license
 *
 * Copyright 2006 - 2016 TubePress LLC (http://tubepress.com/).
 * This file is part of TubePress Pro.
 * REDISTRIBUTION PROHIBITED. Please see http://tubepress.com/license for details.
 */
var tubePressAjaxSearch;!function(e){"use strict";var t="tubepress",r="search",n=r+"Results",o="ephemeral",u=" ",a="#js-"+t+"-ajax-"+r+"-",i=a+"button-",s="",c="disabled",l=e.Logger,g=e.Beacon,p={},d=!0,f=l.on(),v=l.log,h=e.Lang.Utils,b=e.Ajax.LoadStyler,m=e.Vendors.jQuery,y=function(){var r=function(){return e.Gallery},a=function(){return h.isDefined(r())},s=function(){return r().Selectors},l=function(e){return p[e][o][n+"DomId"]},d=function(e){return a()&&s().getOutermostElement(e).length>0},y=function(e,t,r){if(r){var n=s(),o=n.getThumbAreaSelectorLegacy(e),u=n.getThumbAreaSelectorModern(e),a=m(o).length>0;return a?o:u}return t},j=function(e,t){return e?t+" > *":""},A=function(e){var t=p[e][o];return a()&&m.extend(t,r().Options.getEphemeralOptions(e)),t.output=n,t},S=function(e,r){return e?function(){g.publish(t+".gallery.newthumbs",{galleryId:r})}:function(){}},x=function(t,r){var n=l(r),o=d(r),a=y(r,n,o),s=m(n).length>0,g={tubepress_action:"shortcode",tubepress_search:t,tubepress_options:A(r)},p=S(o,r),h=j(o,a),x=e.Environment.getAjaxEndpointUrl()+u+h,L=function(){m(i+r).prop(c,!1),b.removeLoadingStyle(a),p()};return o||s?(f&&(v("Final dest: "+a),v("Ajax selector: "+h)),b.applyLoadingStyle(a),void m(a).load(x,g,L)):void(f&&v("Bad target selector and missing gallery"))};return{send:x}}(),j=function(){var e=function(e){e.stopPropagation(),e.preventDefault();var t=e.target.id,r=t.replace(i.replace("#",s),s),n=m(a+"input-"+r),o=n.val(),u=m(e.target);return f&&v(t+" clicked"),u.prop(c,d),y.send(o,r),!1},t=function(t){m(i+t).click(e)};return{register:t}}(),A=function(){var e=function(e,t){f&&(v("Register "+e),l.dir(t)),p[e]=t,j.register(e)};return{register:e}}();e.AsyncUtil.processQueueCalls("tubePressAjaxSearch",A)}(TubePress);
