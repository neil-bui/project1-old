/**
 * @license
 *
 * Copyright 2006 - 2016 TubePress LLC (http://tubepress.com/).
 * This file is part of TubePress Pro.
 * REDISTRIBUTION PROHIBITED. Please see http://tubepress.com/license for details.
 */
var tubePressYouTubePlayerApi;!function(e,n){"use strict";var r=n.Beacon,t=n.Lang.Utils,o=n.Logger,a="tubepress",i=o.on(),u="youtube",l=".",s=!0,c=!s,f=a+l+u+l+"allApisAvailable",p=function(e){i&&o.log(a+" YT API: "+e)},b=function(e){i&&o.dir(e)},y=function(){var o=c,a=t.isDefined,i=c,u=function(){return a(e.YT)&&a(e.YT.Player)},l=function(){return a(n.PlayerApi)},p=function(){return i?i:l()&&u()},b=function(){i=s,r.publish(f)},y=function(){if(!o&&!u()){o=s;var e="https://www.youtube.com/player_api";n.DomInjector.loadJs(e),t.callWhenTrue(b,p,250)}};return{allApisLoaded:p,loadYouTubeApi:y}}(),d=function(){var e=function(e,r){var t=n.PlayerApi,o=t.EventUtility;switch(r){case 1:o.publishStart(e);break;case 2:o.publishPause(e);break;case 0:o.publishStop(e);break;case 3:o.publishBuffering(e);break;case-1:break;default:p("Unknown event: "+r)}},r=function(e){var n="object",r="string";return typeof HTMLElement===n?e instanceof HTMLElement:e&&typeof e===n&&null!==e&&1===e.nodeType&&typeof e.nodeName===r},t=function(e){var n,t,o=e.target,a="IFRAME";for(n in o)if(o.hasOwnProperty(n)&&(t=o[n],r(t)&&t.nodeName===a))return t.id;return null},o=function(n){var r=t(n),o=n.data;null!==r&&e(r,o)},a=function(e){var r=n.PlayerApi,o=r.EventUtility,a=t(e);null!==a&&(p("YT error"),b(e),o.publishError(a))};return{onStateChange:o,onError:a}}(),v=function(){var t=[],o={events:{onError:d.onError,onStateChange:d.onStateChange}},a=function(r,t){var a=new e.YT.Player(t,o),i={guid:t,domId:t,itemId:r,provider:u,ytPlayer:a};n.PlayerApi.Registry.register(t,i)},i=function(){var e,n=0;for(n;n<t.length;n+=1)e=t[n],a(e[0],e[1])},l=function(e,n){y.allApisLoaded()?a(e,n):(t.push([e,n]),1===t.length&&(y.loadYouTubeApi(),r.subscribe(f,i)))};return{register:l}}();n.AsyncUtil.processQueueCalls("tubePressYouTubePlayerApi",v)}(window,TubePress);
