/**
 * @license
 *
 * Copyright 2006 - 2016 TubePress LLC (http://tubepress.com/).
 * This file is part of TubePress Pro.
 * REDISTRIBUTION PROHIBITED. Please see http://tubepress.com/license for details.
 */
var tubePressVimeoPlayerApi;!function(n,e){"use strict";var i=e.Beacon,t=e.Lang.Utils,r="tubepress",o="vimeo",u="Vimeo",s="Player",a="duration",l="seconds",c=".",f=r+c+o+c+"allApisAvailable",p=e.Vendors.jQuery,d=function(){return e.PlayerApi.EventUtility},h=function(){var n=null,e=function(){null===n&&(n=d())},i=function(n){return p(n.element).attr("id")},t=function(t){e(),n.publishStart(i(this))},r=function(t){var r=i(this);e(),t[a]===t[l]?n.publishStop(r):n.publishPause(r)},o=function(t){e(),n.publishStop(i(this))},u=function(t){e(),n.publishBuffering(i(this))};return{onBuffer:u,onPlay:t,onPause:r,onFinish:o}}(),y=function(){var r=!1,o=t.isDefined,a=!1,l=function(){return o(n[u])&&o(n[u][s])},c=function(){return o(e.PlayerApi)},p=function(){return a?a:c()&&l()},d=function(){a=!0,i.publish(f)},h=function(){if(!r&&!l()){r=!0;var n="https://player.vimeo.com/api/player.js";e.DomInjector.loadJs(n),t.callWhenTrue(d,p,250)}};return{allApisLoaded:p,loadVimeoApi:h}}(),v=function(){var t=[],r=function(i,t){var r=n.document.getElementById(t),u=new Vimeo.Player(r),s={domId:t,player:u,guid:t,provider:o,itemId:i};u.on("play",h.onPlay),u.on("pause",h.onPause),u.on("ended",h.onFinish),u.on("progress",h.onBuffer),u.getPaused().then(function(n){if(!n){var e=d();e.publishStart(t)}}),e.PlayerApi.Registry.register(t,s)},u=function(n,e){var i=p("#"+e);i.load(function(){r(n,e)})},s=function(){var n,e=0;for(e;e<t.length;e+=1)n=t[e],u(n[0],n[1])},a=function(n,e){y.allApisLoaded()?u(n,e):(t.push([n,e]),1===t.length&&(y.loadVimeoApi(),i.subscribe(f,s)))};return{register:a}}();e.AsyncUtil.processQueueCalls("tubePressVimeoPlayerApi",v)}(window,TubePress);
